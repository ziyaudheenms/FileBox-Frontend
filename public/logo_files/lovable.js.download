var st=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var m={HIGHLIGHT_COLOR:"hsl(225, 88%, 53%)",HIGHLIGHT_BG:"hsla(225, 88%, 53%, 0.1)",ALLOWED_ORIGINS:["https://gptengineer.app","http://localhost:3000","https://lovable.dev"],DEBOUNCE_DELAY:10,Z_INDEX:1e4,TOOLTIP_OFFSET:25,MAX_TOOLTIP_WIDTH:200,SCROLL_DEBOUNCE:420,FULL_WIDTH_TOOLTIP_OFFSET:"12px",HIGHLIGHT_STYLE:{FULL_WIDTH:{OFFSET:"-5px",STYLE:"solid"},NORMAL:{OFFSET:"0",STYLE:"solid"}},SELECTED_ATTR:"data-lov-selected",HOVERED_ATTR:"data-lov-hovered",PRIMARY_ATTR:"data-lov-primary",OVERRIDE_STYLESHEET_ID:"lovable-override",INDEX_COMPONENT_NAME:"Index",TABLET_BREAKPOINT:"768px",INDEX_BORDER_RADIUS:"0.75rem"},_=e=>{m.ALLOWED_ORIGINS.forEach(t=>{try{if(!window.parent)return;if(!e||typeof e!="object"){console.error("Invalid message format");return}window.parent.postMessage(e,t)}catch(r){console.error(`Failed to send message to ${t}:`,r)}})},Vr=()=>new Promise(e=>{if(document.readyState!=="loading"){e();return}requestIdleCallback(()=>{e()})}),Ft=async()=>{await Vr();let e=import.meta.hot;return e&&await new Promise(t=>{let r=()=>{if(!e.data.pending){t();return}setTimeout(r,50)};r()}),window.__REACT_SUSPENSE_DONE&&await window.__REACT_SUSPENSE_DONE,!0},at=()=>new Promise(e=>{let t=document.getElementById("root");if(t&&t.children.length>0){e();return}new MutationObserver((n,o)=>{let i=document.getElementById("root");i&&i.children.length>0&&(o.disconnect(),e())}).observe(document.body,{childList:!0,subtree:!0})});var Kr=e=>{let t=e.headers.get("content-type")||"";return t.includes("text/event-stream")||t.includes("application/stream+json")||t.includes("application/x-ndjson")},Zr=(e,t,r)=>{if(!e.body)return e;let n=e.body.getReader(),o=new TextDecoder,i="",l=new ReadableStream({async start(s){try{for(;;){let{done:a,value:c}=await n.read();if(a){_({type:"NETWORK_REQUEST",request:{...t,responseBody:i||"[Streaming completed]",duration:Date.now()-r,streaming:!0,streamComplete:!0}}),s.close();break}let d=o.decode(c,{stream:!0});i+=d,s.enqueue(c),_({type:"NETWORK_REQUEST_CHUNK",request:{...t,chunk:d,streaming:!0}})}}catch(a){s.error(a),_({type:"NETWORK_REQUEST",request:{...t,responseBody:`[Streaming error: ${a instanceof Error?a.message:"Unknown"}]`,duration:Date.now()-r,streaming:!0,streamError:!0}})}}});return new Response(l,{status:e.status,statusText:e.statusText,headers:e.headers})},Yr=()=>{let e=window.fetch;window.fetch=async function(...t){let r=Date.now();try{let n;if(t?.[1]?.body)try{typeof t[1].body=="string"?n=t[1].body:t[1].body instanceof FormData?n="FormData: "+Array.from(t[1].body.entries()).map(([c,d])=>`${c}=${d}`).join("&"):t[1].body instanceof URLSearchParams?n=t[1].body.toString():n=JSON.stringify(t[1].body)}catch{n="Could not serialize request body"}let o=await e(...t),i=t?.[0],s={url:typeof i=="string"?i:i instanceof URL?i.toString():i instanceof Request?i.url:o.url,method:t?.[1]?.method||"GET",status:o.status,statusText:o.statusText,requestBody:n,timestamp:new Date().toISOString(),origin:window.location.origin,headers:t?.[1]?.headers?Object.fromEntries(new Headers(t?.[1]?.headers)):{}};if(Kr(o))return _({type:"NETWORK_REQUEST",request:{...s,responseBody:"[Streaming response - data will follow]",duration:Date.now()-r,streaming:!0,streamComplete:!1}}),Zr(o,s,r);let a;try{o.clone&&(a=await o.clone().text())}catch(c){a=`[Clone failed: ${c instanceof Error?c.message:"Unknown error"}]`}return _({type:"NETWORK_REQUEST",request:{...s,responseBody:a,duration:Date.now()-r}}),o}catch(n){let o;if(t?.[1]?.body)try{typeof t[1].body=="string"?o=t[1].body:t[1].body instanceof FormData?o="FormData: "+Array.from(t[1].body.entries()).map(([s,a])=>`${s}=${a}`).join("&"):t[1].body instanceof URLSearchParams?o=t[1].body.toString():o=JSON.stringify(t[1].body)}catch{o="Could not serialize request body"}let i={url:t?.[0],method:t?.[1]?.method||"GET",origin:window.location.origin,timestamp:new Date().toISOString(),duration:Date.now()-r,headers:t?.[1]?.headers?Object.fromEntries(new Headers(t?.[1]?.headers)):{},requestBody:o},l=n instanceof TypeError?{...i,error:{message:n?.message||"Unknown error",stack:n?.stack}}:{...i,error:{message:n&&typeof n=="object"&&"message"in n&&typeof n.message=="string"?n.message:"Unknown fetch error",stack:n&&typeof n=="object"&&"stack"in n&&typeof n.stack=="string"?n.stack:"Not available"}};throw _({type:"NETWORK_REQUEST",request:l}),n}}},zr=()=>{let e=document.querySelector("div#root");return e?e.childElementCount===0:!1},Bt=(()=>{let e=!1,t=({message:r,lineno:n,colno:o,filename:i,error:l})=>{let s=Array.from(document.scripts||[]).slice(0,25).map(a=>a.src?a.src:a.textContent?.slice(0,80)||"inline");return{message:r,lineno:n,colno:o,filename:i,stack:l?.stack,readyState:document.readyState,userAgent:navigator.userAgent,rootPresent:!!document.getElementById("root"),reactVersions:window.__REACT_DEVTOOLS_GLOBAL_HOOK__?.renderers?Array.from(window.__REACT_DEVTOOLS_GLOBAL_HOOK__.renderers.values()).map(a=>a?.version):void 0,scripts:s}};return()=>{if(e)return;let r=new Set,n=l=>{let{lineno:s,colno:a,filename:c,message:d}=l;return`${d}|${c}|${s}|${a}`};Yr();let o=l=>r.has(l)?!0:(r.add(l),setTimeout(()=>r.delete(l),5e3),!1),i=l=>{let s=n(l);if(o(s))return;let a=t(l);_({type:"RUNTIME_ERROR",error:{...a,blankScreen:zr()}})};window.addEventListener("error",i),window.addEventListener("unhandledrejection",l=>{if(!l.reason?.stack)return;let s=l.reason?.stack||l.reason?.message||String(l.reason);if(o(s))return;let a=Array.from(document.scripts||[]).slice(0,25).map(d=>d.src?d.src:d.textContent?.slice(0,80)||"inline"),c={message:l.reason?.message||"Unhandled promise rejection",stack:l.reason?.stack||String(l.reason),readyState:document.readyState,userAgent:navigator.userAgent,rootPresent:!!document.getElementById("root"),scripts:a};_({type:"UNHANDLED_PROMISE_REJECTION",error:c})}),e=!0}})();(()=>{try{let e=()=>{_({type:"APP_READY",readyState:document.readyState})};document.readyState==="complete"||document.readyState==="interactive"?setTimeout(e,0):window.addEventListener("DOMContentLoaded",e,{once:!0})}catch{}})();var lt=class{constructor(t){this.message=`[Circular Reference to ${t}]`}},j=class{constructor(t,r){this._type=t,this.value=r}},$r={maxDepth:10,indent:2,includeSymbols:!0,preserveTypes:!0,maxStringLength:1e4,maxArrayLength:100,maxObjectKeys:100};function me(e,t={},r=new WeakMap,n="root"){let o={...$r,...t};if(n.split(".").length>o.maxDepth)return new j("MaxDepthReached",`[Max depth of ${o.maxDepth} reached]`);if(e===void 0)return new j("undefined","undefined");if(e===null)return null;if(typeof e=="string")return e.length>o.maxStringLength?new j("String",`${e.slice(0,o.maxStringLength)}... [${e.length-o.maxStringLength} more characters]`):e;if(typeof e=="number")return Number.isNaN(e)?new j("Number","NaN"):Number.isFinite(e)?e:new j("Number",e>0?"Infinity":"-Infinity");if(typeof e=="boolean")return e;if(typeof e=="bigint")return new j("BigInt",e.toString());if(typeof e=="symbol")return new j("Symbol",e.toString());if(typeof e=="function")return new j("Function",{name:e.name||"anonymous",stringValue:e.toString().slice(0,o.maxStringLength)});if(e&&typeof e=="object"){if(r.has(e))return new lt(r.get(e));r.set(e,n)}if(e instanceof Error){let a={name:e.name,message:e.message,stack:e.stack};for(let c of Object.getOwnPropertyNames(e))a[c]||(a[c]=me(e[c],o,r,`${n}.${c}`));return new j("Error",a)}if(e instanceof Date)return new j("Date",{iso:e.toISOString(),value:e.valueOf(),local:e.toString()});if(e instanceof RegExp)return new j("RegExp",{source:e.source,flags:e.flags,string:e.toString()});if(e instanceof Promise)return new j("Promise","[Promise]");if(e instanceof WeakMap||e instanceof WeakSet)return new j(e.constructor.name,"["+e.constructor.name+"]");if(e instanceof Set){let a=Array.from(e);return a.length>o.maxArrayLength?new j("Set",{values:a.slice(0,o.maxArrayLength).map((c,d)=>me(c,o,r,`${n}.Set[${d}]`)),truncated:a.length-o.maxArrayLength}):new j("Set",{values:a.map((c,d)=>me(c,o,r,`${n}.Set[${d}]`))})}if(e instanceof Map){let a={},c=0,d=0;for(let[f,g]of e.entries()){if(d>=o.maxObjectKeys){c++;continue}let I=typeof f=="object"?JSON.stringify(me(f,o,r,`${n}.MapKey`)):String(f);a[I]=me(g,o,r,`${n}.Map[${I}]`),d++}return new j("Map",{entries:a,truncated:c||void 0})}if(ArrayBuffer.isView(e)){let a=e;return new j(e.constructor.name,{length:a.length,byteLength:a.byteLength,sample:Array.from(a.slice(0,10))})}if(Array.isArray(e))return e.length>o.maxArrayLength?e.slice(0,o.maxArrayLength).map((a,c)=>me(a,o,r,`${n}[${c}]`)).concat([`... ${e.length-o.maxArrayLength} more items`]):e.map((a,c)=>me(a,o,r,`${n}[${c}]`));let i={},l=[...Object.getOwnPropertyNames(e)];o.includeSymbols&&l.push(...Object.getOwnPropertySymbols(e).map(a=>a.toString()));let s=0;return l.slice(0,o.maxObjectKeys).forEach(a=>{try{let c=e[a];i[a]=me(c,o,r,`${n}.${a}`)}catch(c){i[a]=new j("Error",`[Unable to serialize: ${c.message}]`)}}),l.length>o.maxObjectKeys&&(s=l.length-o.maxObjectKeys,i["..."]=`${s} more properties`),i}var jr={log:console.log,warn:console.warn,error:console.error},Jr={log:"info",warn:"warning",error:"error"},Wt=(()=>{let e=!1,t=[],r=null,n=250,o=()=>{if(t.length===0){r=null;return}let i=[...t];t.length=0,r=null,_({type:"CONSOLE_OUTPUT",messages:i})};return()=>{if(e)return;let i=l=>{console[l]=(...s)=>{jr[l].apply(console,s);let a=null;if(l==="warn"||l==="error"){let g=new Error;g.stack&&(a=g.stack.split(`
`).slice(2).join(`
`))}let c=s.map(g=>me(g,{maxDepth:5,includeSymbols:!0,preserveTypes:!0})),d=c.map(g=>typeof g=="string"?g:JSON.stringify(g,null,2).slice(0,1e4)).join(" ")+(a?`
`+a:""),f={level:Jr[l],message:d.slice(0,1e4),logged_at:new Date().toISOString(),raw:c};t.push(f),r===null&&(r=setTimeout(o,n))}};i("log"),i("warn"),i("error"),e=!0}})();var Ht=()=>{let e=t=>{!t?.origin||!t?.data?.type||!m.ALLOWED_ORIGINS.includes(t.origin)||t.data.type==="NAVIGATE"&&(t.data.direction==="back"?window.history.back():t.data.direction==="forward"&&window.history.forward())};window.addEventListener("message",e)};var Pt=()=>{let e=()=>{let t=document.location.href,r=document.querySelector("body"),n=new MutationObserver(()=>{t!==document.location.href&&(t=document.location.href,window.top&&(window.top.postMessage({type:"URL_CHANGED",url:document.location.href},"https://lovable.dev"),window.top.postMessage({type:"URL_CHANGED",url:document.location.href},"http://localhost:3000")))});r&&n.observe(r,{childList:!0,subtree:!0})};window.addEventListener("load",e)};var ee;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(ee||(ee={}));function Qr(e){return e.nodeType===e.ELEMENT_NODE}function be(e){var t=e?.host;return t?.shadowRoot===e}function Ce(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function qr(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),e}function ct(e){try{var t=e.rules||e.cssRules;return t?qr(Array.from(t).map(dt).join("")):null}catch{return null}}function dt(e){var t=e.cssText;if(Xr(e))try{t=ct(e.styleSheet)||t}catch{}return t}function Xr(e){return"styleSheet"in e}var Vt=function(){function e(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return e.prototype.getId=function(t){var r;if(!t)return-1;var n=(r=this.getMeta(t))===null||r===void 0?void 0:r.id;return n??-1},e.prototype.getNode=function(t){return this.idNodeMap.get(t)||null},e.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},e.prototype.getMeta=function(t){return this.nodeMetaMap.get(t)||null},e.prototype.removeNodeFromMap=function(t){var r=this,n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(function(o){return r.removeNodeFromMap(o)})},e.prototype.has=function(t){return this.idNodeMap.has(t)},e.prototype.hasNode=function(t){return this.nodeMetaMap.has(t)},e.prototype.add=function(t,r){var n=r.id;this.idNodeMap.set(n,t),this.nodeMetaMap.set(t,r)},e.prototype.replace=function(t,r){var n=this.getNode(t);if(n){var o=this.nodeMetaMap.get(n);o&&this.nodeMetaMap.set(r,o)}this.idNodeMap.set(t,r)},e.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},e}();function Kt(){return new Vt}function Me(e){var t=e.maskInputOptions,r=e.tagName,n=e.type,o=e.value,i=e.maskInputFn,l=o||"";return(t[r.toLowerCase()]||t[n])&&(i?l=i(l):l="*".repeat(l.length)),l}var Gt="__rrweb_original__";function en(e){var t=e.getContext("2d");if(!t)return!0;for(var r=50,n=0;n<e.width;n+=r)for(var o=0;o<e.height;o+=r){var i=t.getImageData,l=Gt in i?i[Gt]:i,s=new Uint32Array(l.call(t,n,o,Math.min(r,e.width-n),Math.min(r,e.height-o)).data.buffer);if(s.some(function(a){return a!==0}))return!1}return!0}var tn=1,rn=new RegExp("[^a-z0-9-_:]"),Ee=-2;function ut(){return tn++}function nn(e){if(e instanceof HTMLFormElement)return"form";var t=e.tagName.toLowerCase().trim();return rn.test(t)?"div":t}function on(e){return e.cssRules?Array.from(e.cssRules).map(function(t){return t.cssText||""}).join(""):""}function sn(e){var t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}var Ae,Ut,an=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,ln=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/,cn=/^(data:)([^,]*),(.*)/i;function Be(e,t){return(e||"").replace(an,function(r,n,o,i,l,s){var a=o||l||s,c=n||i||"";if(!a)return r;if(!ln.test(a)||cn.test(a))return"url(".concat(c).concat(a).concat(c,")");if(a[0]==="/")return"url(".concat(c).concat(sn(t)+a).concat(c,")");var d=t.split("/"),f=a.split("/");d.pop();for(var g=0,I=f;g<I.length;g++){var p=I[g];p!=="."&&(p===".."?d.pop():d.push(p))}return"url(".concat(c).concat(d.join("/")).concat(c,")")})}var dn=/^[^ \t\n\r\u000c]+/,un=/^[, \t\n\r\u000c]+/;function fn(e,t){if(t.trim()==="")return t;var r=0;function n(c){var d,f=c.exec(t.substring(r));return f?(d=f[0],r+=d.length,d):""}for(var o=[];n(un),!(r>=t.length);){var i=n(dn);if(i.slice(-1)===",")i=Te(e,i.substring(0,i.length-1)),o.push(i);else{var l="";i=Te(e,i);for(var s=!1;;){var a=t.charAt(r);if(a===""){o.push((i+l).trim());break}else if(s)a===")"&&(s=!1);else if(a===","){r+=1,o.push((i+l).trim());break}else a==="("&&(s=!0);l+=a,r+=1}}}return o.join(", ")}function Te(e,t){if(!t||t.trim()==="")return t;var r=e.createElement("a");return r.href=t,r.href}function mn(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function ft(){var e=document.createElement("a");return e.href="",e.href}function mt(e,t,r,n){return r==="src"||r==="href"&&n&&!(t==="use"&&n[0]==="#")||r==="xlink:href"&&n&&n[0]!=="#"||r==="background"&&n&&(t==="table"||t==="td"||t==="th")?Te(e,n):r==="srcset"&&n?fn(e,n):r==="style"&&n?Be(n,ft()):t==="object"&&r==="data"&&n?Te(e,n):n}function pn(e,t,r){if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(var n=e.classList.length;n--;){var o=e.classList[n];if(t.test(o))return!0}return r?e.matches(r):!1}function ke(e,t,r){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return r?ke(e.parentNode,t,r):!1;for(var n=e.classList.length;n--;){var o=e.classList[n];if(t.test(o))return!0}return r?ke(e.parentNode,t,r):!1}function pt(e,t,r){var n=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(n===null)return!1;if(typeof t=="string"){if(n.classList.contains(t)||n.closest(".".concat(t)))return!0}else if(ke(n,t,!0))return!0;return!!(r&&(n.matches(r)||n.closest(r)))}function hn(e,t,r){var n=e.contentWindow;if(n){var o=!1,i;try{i=n.document.readyState}catch{return}if(i!=="complete"){var l=setTimeout(function(){o||(t(),o=!0)},r);e.addEventListener("load",function(){clearTimeout(l),o=!0,t()});return}var s="about:blank";if(n.location.href!==s||e.src===s||e.src==="")return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}}function gn(e,t,r){var n=!1,o;try{o=e.sheet}catch{return}if(!o){var i=setTimeout(function(){n||(t(),n=!0)},r);e.addEventListener("load",function(){clearTimeout(i),n=!0,t()})}}function yn(e,t){var r=t.doc,n=t.mirror,o=t.blockClass,i=t.blockSelector,l=t.maskTextClass,s=t.maskTextSelector,a=t.inlineStylesheet,c=t.maskInputOptions,d=c===void 0?{}:c,f=t.maskTextFn,g=t.maskInputFn,I=t.dataURLOptions,p=I===void 0?{}:I,T=t.inlineImages,O=t.recordCanvas,N=t.keepIframeSrcFn,E=t.newlyAddedElement,b=E===void 0?!1:E,W=In(r,n);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:ee.Document,childNodes:[],compatMode:e.compatMode}:{type:ee.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:ee.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:W};case e.ELEMENT_NODE:return En(e,{doc:r,blockClass:o,blockSelector:i,inlineStylesheet:a,maskInputOptions:d,maskInputFn:g,dataURLOptions:p,inlineImages:T,recordCanvas:O,keepIframeSrcFn:N,newlyAddedElement:b,rootId:W});case e.TEXT_NODE:return Cn(e,{maskTextClass:l,maskTextSelector:s,maskTextFn:f,rootId:W});case e.CDATA_SECTION_NODE:return{type:ee.CDATA,textContent:"",rootId:W};case e.COMMENT_NODE:return{type:ee.Comment,textContent:e.textContent||"",rootId:W};default:return!1}}function In(e,t){if(t.hasNode(e)){var r=t.getId(e);return r===1?void 0:r}}function Cn(e,t){var r,n=t.maskTextClass,o=t.maskTextSelector,i=t.maskTextFn,l=t.rootId,s=e.parentNode&&e.parentNode.tagName,a=e.textContent,c=s==="STYLE"?!0:void 0,d=s==="SCRIPT"?!0:void 0;if(c&&a){try{e.nextSibling||e.previousSibling||!((r=e.parentNode.sheet)===null||r===void 0)&&r.cssRules&&(a=on(e.parentNode.sheet))}catch(f){console.warn("Cannot get CSS styles from text's parentNode. Error: ".concat(f),e)}a=Be(a,ft())}return d&&(a="SCRIPT_PLACEHOLDER"),!c&&!d&&a&&pt(e,n,o)&&(a=i?i(a):a.replace(/[\S]/g,"*")),{type:ee.Text,textContent:a||"",isStyle:c,rootId:l}}function En(e,t){for(var r=t.doc,n=t.blockClass,o=t.blockSelector,i=t.inlineStylesheet,l=t.maskInputOptions,s=l===void 0?{}:l,a=t.maskInputFn,c=t.dataURLOptions,d=c===void 0?{}:c,f=t.inlineImages,g=t.recordCanvas,I=t.keepIframeSrcFn,p=t.newlyAddedElement,T=p===void 0?!1:p,O=t.rootId,N=pn(e,n,o),E=nn(e),b={},W=e.attributes.length,te=0;te<W;te++){var $=e.attributes[te];b[$.name]=mt(r,E,$.name,$.value)}if(E==="link"&&i){var J=Array.from(r.styleSheets).find(function(w){return w.href===e.href}),H=null;J&&(H=ct(J)),H&&(delete b.rel,delete b.href,b._cssText=Be(H,J.href))}if(E==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){var H=ct(e.sheet);H&&(b._cssText=Be(H,ft()))}if(E==="input"||E==="textarea"||E==="select"){var oe=e.value,ie=e.checked;b.type!=="radio"&&b.type!=="checkbox"&&b.type!=="submit"&&b.type!=="button"&&oe?b.value=Me({type:b.type,tagName:E,value:oe,maskInputOptions:s,maskInputFn:a}):ie&&(b.checked=ie)}if(E==="option"&&(e.selected&&!s.select?b.selected=!0:delete b.selected),E==="canvas"&&g){if(e.__context==="2d")en(e)||(b.rr_dataURL=e.toDataURL(d.type,d.quality));else if(!("__context"in e)){var u=e.toDataURL(d.type,d.quality),y=document.createElement("canvas");y.width=e.width,y.height=e.height;var v=y.toDataURL(d.type,d.quality);u!==v&&(b.rr_dataURL=u)}}if(E==="img"&&f){Ae||(Ae=r.createElement("canvas"),Ut=Ae.getContext("2d"));var h=e,C=h.crossOrigin;h.crossOrigin="anonymous";var S=function(){try{Ae.width=h.naturalWidth,Ae.height=h.naturalHeight,Ut.drawImage(h,0,0),b.rr_dataURL=Ae.toDataURL(d.type,d.quality)}catch(w){console.warn("Cannot inline img src=".concat(h.currentSrc,"! Error: ").concat(w))}C?b.crossOrigin=C:h.removeAttribute("crossorigin")};h.complete&&h.naturalWidth!==0?S():h.onload=S}if((E==="audio"||E==="video")&&(b.rr_mediaState=e.paused?"paused":"played",b.rr_mediaCurrentTime=e.currentTime),T||(e.scrollLeft&&(b.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(b.rr_scrollTop=e.scrollTop)),N){var L=e.getBoundingClientRect(),k=L.width,A=L.height;b={class:b.class,rr_width:"".concat(k,"px"),rr_height:"".concat(A,"px")}}return E==="iframe"&&!I(b.src)&&(e.contentDocument||(b.rr_src=b.src),delete b.src),{type:ee.Element,tagName:E,attributes:b,childNodes:[],isSVG:mn(e)||void 0,needBlock:N,rootId:O}}function G(e){return e===void 0?"":e.toLowerCase()}function bn(e,t){if(t.comment&&e.type===ee.Comment)return!0;if(e.type===ee.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&e.attributes.rel==="preload"&&e.attributes.as==="script"||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(G(e.attributes.name).match(/^msapplication-tile(image|color)$/)||G(e.attributes.name)==="application-name"||G(e.attributes.rel)==="icon"||G(e.attributes.rel)==="apple-touch-icon"||G(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&G(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(G(e.attributes.property).match(/^(og|twitter|fb):/)||G(e.attributes.name).match(/^(og|twitter):/)||G(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(G(e.attributes.name)==="robots"||G(e.attributes.name)==="googlebot"||G(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(G(e.attributes.name)==="author"||G(e.attributes.name)==="generator"||G(e.attributes.name)==="framework"||G(e.attributes.name)==="publisher"||G(e.attributes.name)==="progid"||G(e.attributes.property).match(/^article:/)||G(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(G(e.attributes.name)==="google-site-verification"||G(e.attributes.name)==="yandex-verification"||G(e.attributes.name)==="csrf-token"||G(e.attributes.name)==="p:domain_verify"||G(e.attributes.name)==="verify-v1"||G(e.attributes.name)==="verification"||G(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function Ie(e,t){var r=t.doc,n=t.mirror,o=t.blockClass,i=t.blockSelector,l=t.maskTextClass,s=t.maskTextSelector,a=t.skipChild,c=a===void 0?!1:a,d=t.inlineStylesheet,f=d===void 0?!0:d,g=t.maskInputOptions,I=g===void 0?{}:g,p=t.maskTextFn,T=t.maskInputFn,O=t.slimDOMOptions,N=t.dataURLOptions,E=N===void 0?{}:N,b=t.inlineImages,W=b===void 0?!1:b,te=t.recordCanvas,$=te===void 0?!1:te,J=t.onSerialize,H=t.onIframeLoad,oe=t.iframeLoadTimeout,ie=oe===void 0?5e3:oe,u=t.onStylesheetLoad,y=t.stylesheetLoadTimeout,v=y===void 0?5e3:y,h=t.keepIframeSrcFn,C=h===void 0?function(){return!1}:h,S=t.newlyAddedElement,L=S===void 0?!1:S,k=t.preserveWhiteSpace,A=k===void 0?!0:k,w=yn(e,{doc:r,mirror:n,blockClass:o,blockSelector:i,maskTextClass:l,maskTextSelector:s,inlineStylesheet:f,maskInputOptions:I,maskTextFn:p,maskInputFn:T,dataURLOptions:E,inlineImages:W,recordCanvas:$,keepIframeSrcFn:C,newlyAddedElement:L});if(!w)return console.warn(e,"not serialized"),null;var D;n.hasNode(e)?D=n.getId(e):bn(w,O)||!A&&w.type===ee.Text&&!w.isStyle&&!w.textContent.replace(/^\s+|\s+$/gm,"").length?D=Ee:D=ut();var M=Object.assign(w,{id:D});if(n.add(e,M),D===Ee)return null;J&&J(e);var U=!c;if(M.type===ee.Element){U=U&&!M.needBlock,delete M.needBlock;var K=e.shadowRoot;K&&Ce(K)&&(M.isShadowHost=!0)}if((M.type===ee.Document||M.type===ee.Element)&&U){O.headWhitespace&&M.type===ee.Element&&M.tagName==="head"&&(A=!1);for(var ce={doc:r,mirror:n,blockClass:o,blockSelector:i,maskTextClass:l,maskTextSelector:s,skipChild:c,inlineStylesheet:f,maskInputOptions:I,maskTextFn:p,maskInputFn:T,slimDOMOptions:O,dataURLOptions:E,inlineImages:W,recordCanvas:$,preserveWhiteSpace:A,onSerialize:J,onIframeLoad:H,iframeLoadTimeout:ie,onStylesheetLoad:u,stylesheetLoadTimeout:v,keepIframeSrcFn:C},R=0,q=Array.from(e.childNodes);R<q.length;R++){var re=q[R],P=Ie(re,ce);P&&M.childNodes.push(P)}if(Qr(e)&&e.shadowRoot)for(var X=0,B=Array.from(e.shadowRoot.childNodes);X<B.length;X++){var re=B[X],P=Ie(re,ce);P&&(Ce(e.shadowRoot)&&(P.isShadow=!0),M.childNodes.push(P))}}return e.parentNode&&be(e.parentNode)&&Ce(e.parentNode)&&(M.isShadow=!0),M.type===ee.Element&&M.tagName==="iframe"&&hn(e,function(){var Z=e.contentDocument;if(Z&&H){var ye=Ie(Z,{doc:Z,mirror:n,blockClass:o,blockSelector:i,maskTextClass:l,maskTextSelector:s,skipChild:!1,inlineStylesheet:f,maskInputOptions:I,maskTextFn:p,maskInputFn:T,slimDOMOptions:O,dataURLOptions:E,inlineImages:W,recordCanvas:$,preserveWhiteSpace:A,onSerialize:J,onIframeLoad:H,iframeLoadTimeout:ie,onStylesheetLoad:u,stylesheetLoadTimeout:v,keepIframeSrcFn:C});ye&&H(e,ye)}},ie),M.type===ee.Element&&M.tagName==="link"&&M.attributes.rel==="stylesheet"&&gn(e,function(){if(u){var Z=Ie(e,{doc:r,mirror:n,blockClass:o,blockSelector:i,maskTextClass:l,maskTextSelector:s,skipChild:!1,inlineStylesheet:f,maskInputOptions:I,maskTextFn:p,maskInputFn:T,slimDOMOptions:O,dataURLOptions:E,inlineImages:W,recordCanvas:$,preserveWhiteSpace:A,onSerialize:J,onIframeLoad:H,iframeLoadTimeout:ie,onStylesheetLoad:u,stylesheetLoadTimeout:v,keepIframeSrcFn:C});Z&&u(e,Z)}},v),M}function Zt(e,t){var r=t||{},n=r.mirror,o=n===void 0?new Vt:n,i=r.blockClass,l=i===void 0?"rr-block":i,s=r.blockSelector,a=s===void 0?null:s,c=r.maskTextClass,d=c===void 0?"rr-mask":c,f=r.maskTextSelector,g=f===void 0?null:f,I=r.inlineStylesheet,p=I===void 0?!0:I,T=r.inlineImages,O=T===void 0?!1:T,N=r.recordCanvas,E=N===void 0?!1:N,b=r.maskAllInputs,W=b===void 0?!1:b,te=r.maskTextFn,$=r.maskInputFn,J=r.slimDOM,H=J===void 0?!1:J,oe=r.dataURLOptions,ie=r.preserveWhiteSpace,u=r.onSerialize,y=r.onIframeLoad,v=r.iframeLoadTimeout,h=r.onStylesheetLoad,C=r.stylesheetLoadTimeout,S=r.keepIframeSrcFn,L=S===void 0?function(){return!1}:S,k=W===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:W===!1?{password:!0}:W,A=H===!0||H==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:H==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:H===!1?{}:H;return Ie(e,{doc:e,mirror:o,blockClass:l,blockSelector:a,maskTextClass:d,maskTextSelector:g,skipChild:!1,inlineStylesheet:p,maskInputOptions:k,maskTextFn:te,maskInputFn:$,slimDOMOptions:A,dataURLOptions:oe,inlineImages:O,recordCanvas:E,preserveWhiteSpace:ie,onSerialize:u,onIframeLoad:y,iframeLoadTimeout:v,onStylesheetLoad:h,stylesheetLoadTimeout:C,keepIframeSrcFn:L,newlyAddedElement:!1})}var vn=/([^\\]):hover/,Eo=new RegExp(vn.source,"g");function ne(e,t,r=document){let n={capture:!0,passive:!0};return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}var we=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`,Yt={map:{},getId(){return console.error(we),-1},getNode(){return console.error(we),null},removeNodeFromMap(){console.error(we)},has(){return console.error(we),!1},reset(){console.error(we)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(Yt=new Proxy(Yt,{get(e,t,r){return t==="map"&&console.error(we),Reflect.get(e,t,r)}}));function Re(e,t,r={}){let n=null,o=0;return function(...i){let l=Date.now();!o&&r.leading===!1&&(o=l);let s=t-(l-o),a=this;s<=0||s>t?(n&&(clearTimeout(n),n=null),o=l,e.apply(a,i)):!n&&r.trailing!==!1&&(n=setTimeout(()=>{o=r.leading===!1?0:Date.now(),n=null,e.apply(a,i)},s))}}function ve(e,t,r,n,o=window){let i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,n?r:{set(l){setTimeout(()=>{r.set.call(this,l)},0),i&&i.set&&i.set.call(this,l)}}),()=>ve(e,t,i||{},!0)}function de(e,t,r){try{if(!(t in e))return()=>{};let n=e[t],o=r(n);return typeof o=="function"&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:n}})),e[t]=o,()=>{e[t]=n}}catch{return()=>{}}}function He(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Pe(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Y(e,t,r,n){if(!e)return!1;let o=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(!o)return!1;if(typeof t=="string"){if(o.classList.contains(t)||n&&o.closest("."+t)!==null)return!0}else if(ke(o,t,n))return!0;return!!(r&&(e.matches(r)||n&&o.closest(r)!==null))}function zt(e,t){return t.getId(e)!==-1}function Ge(e,t){return t.getId(e)===Ee}function ht(e,t){if(be(e))return!1;let r=t.getId(e);return t.has(r)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?ht(e.parentNode,t):!0:!0}function gt(e){return!!e.changedTouches}function $t(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let r=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===r)return!0;while(r=r&&r.parentNode);return!1})}function Ue(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function Ve(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function Ke(e){return!!e?.shadowRoot}var We=class{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){var r;return(r=this.styleIDMap.get(t))!==null&&r!==void 0?r:-1}has(t){return this.styleIDMap.has(t)}add(t,r){if(this.has(t))return this.getId(t);let n;return r===void 0?n=this.id++:n=r,this.styleIDMap.set(t,n),this.idStyleMap.set(n,t),n}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}};var F=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(F||{}),x=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e))(x||{}),Ze=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(Ze||{}),pe=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(pe||{});function jt(e){return"__ln"in e}var yt=class{constructor(){this.length=0,this.head=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let r=this.head;for(let n=0;n<t;n++)r=r?.next||null;return r}addNode(t){let r={value:t,previous:null,next:null};if(t.__ln=r,t.previousSibling&&jt(t.previousSibling)){let n=t.previousSibling.__ln.next;r.next=n,r.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=r,n&&(n.previous=r)}else if(t.nextSibling&&jt(t.nextSibling)&&t.nextSibling.__ln.previous){let n=t.nextSibling.__ln.previous;r.previous=n,r.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=r,n&&(n.next=r)}else this.head&&(this.head.previous=r),r.next=this.head,this.head=r;this.length++}removeNode(t){let r=t.__ln;this.head&&(r.previous?(r.previous.next=r.next,r.next&&(r.next.previous=r.previous)):(this.head=r.next,this.head&&(this.head.previous=null)),t.__ln&&delete t.__ln,this.length--)}},Jt=(e,t)=>`${e}@${t}`,Ye=class{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;let t=[],r=new yt,n=s=>{let a=s,c=Ee;for(;c===Ee;)a=a&&a.nextSibling,c=a&&this.mirror.getId(a);return c},o=s=>{var a,c,d,f;let g=null;((c=(a=s.getRootNode)===null||a===void 0?void 0:a.call(s))===null||c===void 0?void 0:c.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&s.getRootNode().host&&(g=s.getRootNode().host);let I=g;for(;((f=(d=I?.getRootNode)===null||d===void 0?void 0:d.call(I))===null||f===void 0?void 0:f.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&I.getRootNode().host;)I=I.getRootNode().host;let p=!this.doc.contains(s)&&(!I||!this.doc.contains(I));if(!s.parentNode||p)return;let T=be(s.parentNode)?this.mirror.getId(g):this.mirror.getId(s.parentNode),O=n(s);if(T===-1||O===-1)return r.addNode(s);let N=Ie(s,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:E=>{Ue(E,this.mirror)&&this.iframeManager.addIframe(E),Ve(E,this.mirror)&&this.stylesheetManager.trackLinkElement(E),Ke(s)&&this.shadowDomManager.addShadowRoot(s.shadowRoot,this.doc)},onIframeLoad:(E,b)=>{this.iframeManager.attachIframe(E,b),this.shadowDomManager.observeAttachShadow(E)},onStylesheetLoad:(E,b)=>{this.stylesheetManager.attachLinkElement(E,b)}});N&&t.push({parentId:T,nextId:O,node:N})};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(let s of Array.from(this.movedSet.values()))Qt(this.removes,s,this.mirror)&&!this.movedSet.has(s.parentNode)||o(s);for(let s of Array.from(this.addedSet.values()))!qt(this.droppedSet,s)&&!Qt(this.removes,s,this.mirror)||qt(this.movedSet,s)?o(s):this.droppedSet.add(s);let i=null;for(;r.length;){let s=null;if(i){let a=this.mirror.getId(i.value.parentNode),c=n(i.value);a!==-1&&c!==-1&&(s=i)}if(!s)for(let a=r.length-1;a>=0;a--){let c=r.get(a);if(c){let d=this.mirror.getId(c.value.parentNode);if(n(c.value)===-1)continue;if(d!==-1){s=c;break}else{let g=c.value;if(g.parentNode&&g.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){let I=g.parentNode.host;if(this.mirror.getId(I)!==-1){s=c;break}}}}}if(!s){for(;r.head;)r.removeNode(r.head.value);break}i=s.previous,r.removeNode(s.value),o(s.value)}let l={texts:this.texts.map(s=>({id:this.mirror.getId(s.node),value:s.value})).filter(s=>this.mirror.has(s.id)),attributes:this.attributes.map(s=>({id:this.mirror.getId(s.node),attributes:s.attributes})).filter(s=>this.mirror.has(s.id)),removes:this.removes,adds:t};!l.texts.length&&!l.attributes.length&&!l.removes.length&&!l.adds.length||(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(l))},this.processMutation=t=>{if(!Ge(t.target,this.mirror))switch(t.type){case"characterData":{let r=t.target.textContent;!Y(t.target,this.blockClass,this.blockSelector,!1)&&r!==t.oldValue&&this.texts.push({value:pt(t.target,this.maskTextClass,this.maskTextSelector)&&r?this.maskTextFn?this.maskTextFn(r):r.replace(/[\S]/g,"*"):r,node:t.target});break}case"attributes":{let r=t.target,n=t.target.getAttribute(t.attributeName);if(t.attributeName==="value"&&(n=Me({maskInputOptions:this.maskInputOptions,tagName:t.target.tagName,type:t.target.getAttribute("type"),value:n,maskInputFn:this.maskInputFn})),Y(t.target,this.blockClass,this.blockSelector,!1)||n===t.oldValue)return;let o=this.attributes.find(i=>i.node===t.target);if(r.tagName==="IFRAME"&&t.attributeName==="src"&&!this.keepIframeSrcFn(n))if(!r.contentDocument)t.attributeName="rr_src";else return;if(o||(o={node:t.target,attributes:{}},this.attributes.push(o)),t.attributeName==="style"){let i=this.doc.createElement("span");t.oldValue&&i.setAttribute("style",t.oldValue),(o.attributes.style===void 0||o.attributes.style===null)&&(o.attributes.style={});let l=o.attributes.style;for(let s of Array.from(r.style)){let a=r.style.getPropertyValue(s),c=r.style.getPropertyPriority(s);(a!==i.style.getPropertyValue(s)||c!==i.style.getPropertyPriority(s))&&(c===""?l[s]=a:l[s]=[a,c])}for(let s of Array.from(i.style))r.style.getPropertyValue(s)===""&&(l[s]=!1)}else o.attributes[t.attributeName]=mt(this.doc,r.tagName,t.attributeName,n);break}case"childList":{if(Y(t.target,this.blockClass,this.blockSelector,!0))return;t.addedNodes.forEach(r=>this.genAdds(r,t.target)),t.removedNodes.forEach(r=>{let n=this.mirror.getId(r),o=be(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);Y(t.target,this.blockClass,this.blockSelector,!1)||Ge(r,this.mirror)||!zt(r,this.mirror)||(this.addedSet.has(r)?(It(this.addedSet,r),this.droppedSet.add(r)):this.addedSet.has(t.target)&&n===-1||ht(t.target,this.mirror)||(this.movedSet.has(r)&&this.movedMap[Jt(n,o)]?It(this.movedSet,r):this.removes.push({parentId:o,id:n,isShadow:be(t.target)&&Ce(t.target)?!0:void 0})),this.mapRemoves.push(r))});break}}},this.genAdds=(t,r)=>{if(this.mirror.hasNode(t)){if(Ge(t,this.mirror))return;this.movedSet.add(t);let n=null;r&&this.mirror.hasNode(r)&&(n=this.mirror.getId(r)),n&&n!==-1&&(this.movedMap[Jt(this.mirror.getId(t),n)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);Y(t,this.blockClass,this.blockSelector,!1)||t.childNodes.forEach(n=>this.genAdds(n))}}init(t){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager"].forEach(r=>{this[r]=t[r]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}};function It(e,t){e.delete(t),t.childNodes.forEach(r=>It(e,r))}function Qt(e,t,r){return e.length===0?!1:Xt(e,t,r)}function Xt(e,t,r){let{parentNode:n}=t;if(!n)return!1;let o=r.getId(n);return e.some(i=>i.id===o)?!0:Xt(e,n,r)}function qt(e,t){return e.size===0?!1:er(e,t)}function er(e,t){let{parentNode:r}=t;return r?e.has(r)?!0:er(e,r):!1}var ge=[],nr=typeof CSSGroupingRule<"u",or=typeof CSSMediaRule<"u",ir=typeof CSSSupportsRule<"u",sr=typeof CSSConditionRule<"u";function Oe(e){try{if("composedPath"in e){let t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0];return e.target}catch{return e.target}}function Ct(e,t){var r,n;let o=new Ye;ge.push(o),o.init(e);let i=window.MutationObserver||window.__rrMutationObserver,l=(n=(r=window?.Zone)===null||r===void 0?void 0:r.__symbol__)===null||n===void 0?void 0:n.call(r,"MutationObserver");l&&window[l]&&(i=window[l]);let s=new i(o.processMutations.bind(o));return s.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),s}function Sn({mousemoveCb:e,sampling:t,doc:r,mirror:n}){if(t.mousemove===!1)return()=>{};let o=typeof t.mousemove=="number"?t.mousemove:50,i=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500,l=[],s,a=Re(f=>{let g=Date.now()-s;e(l.map(I=>(I.timeOffset-=g,I)),f),l=[],s=null},i),c=Re(f=>{let g=Oe(f),{clientX:I,clientY:p}=gt(f)?f.changedTouches[0]:f;s||(s=Date.now()),l.push({x:I,y:p,id:n.getId(g),timeOffset:Date.now()-s}),a(typeof DragEvent<"u"&&f instanceof DragEvent?x.Drag:f instanceof MouseEvent?x.MouseMove:x.TouchMove)},o,{trailing:!1}),d=[ne("mousemove",c,r),ne("touchmove",c,r),ne("drag",c,r)];return()=>{d.forEach(f=>f())}}function An({mouseInteractionCb:e,doc:t,mirror:r,blockClass:n,blockSelector:o,sampling:i}){if(i.mouseInteraction===!1)return()=>{};let l=i.mouseInteraction===!0||i.mouseInteraction===void 0?{}:i.mouseInteraction,s=[],a=c=>d=>{let f=Oe(d);if(Y(f,n,o,!0))return;let g=gt(d)?d.changedTouches[0]:d;if(!g)return;let I=r.getId(f),{clientX:p,clientY:T}=g;e({type:Ze[c],id:I,x:p,y:T})};return Object.keys(Ze).filter(c=>Number.isNaN(Number(c))&&!c.endsWith("_Departed")&&l[c]!==!1).forEach(c=>{let d=c.toLowerCase(),f=a(c);s.push(ne(d,f,t))}),()=>{s.forEach(c=>c())}}function Et({scrollCb:e,doc:t,mirror:r,blockClass:n,blockSelector:o,sampling:i}){let l=Re(s=>{let a=Oe(s);if(!a||Y(a,n,o,!0))return;let c=r.getId(a);if(a===t){let d=t.scrollingElement||t.documentElement;e({id:c,x:d.scrollLeft,y:d.scrollTop})}else e({id:c,x:a.scrollLeft,y:a.scrollTop})},i.scroll||100);return ne("scroll",l,t)}function Tn({viewportResizeCb:e}){let t=-1,r=-1,n=Re(()=>{let o=He(),i=Pe();(t!==o||r!==i)&&(e({width:Number(i),height:Number(o)}),t=o,r=i)},200);return ne("resize",n,window)}function tr(e,t){let r=Object.assign({},e);return t||delete r.userTriggered,r}var wn=["INPUT","TEXTAREA","SELECT"],rr=new WeakMap;function Rn({inputCb:e,doc:t,mirror:r,blockClass:n,blockSelector:o,ignoreClass:i,maskInputOptions:l,maskInputFn:s,sampling:a,userTriggeredOnInput:c}){function d(N){let E=Oe(N),b=N.isTrusted;if(E&&E.tagName==="OPTION"&&(E=E.parentElement),!E||!E.tagName||wn.indexOf(E.tagName)<0||Y(E,n,o,!0))return;let W=E.type;if(E.classList.contains(i))return;let te=E.value,$=!1;W==="radio"||W==="checkbox"?$=E.checked:(l[E.tagName.toLowerCase()]||l[W])&&(te=Me({maskInputOptions:l,tagName:E.tagName,type:W,value:te,maskInputFn:s})),f(E,tr({text:te,isChecked:$,userTriggered:b},c));let J=E.name;W==="radio"&&J&&$&&t.querySelectorAll(`input[type="radio"][name="${J}"]`).forEach(H=>{H!==E&&f(H,tr({text:H.value,isChecked:!$,userTriggered:!1},c))})}function f(N,E){let b=rr.get(N);if(!b||b.text!==E.text||b.isChecked!==E.isChecked){rr.set(N,E);let W=r.getId(N);e(Object.assign(Object.assign({},E),{id:W}))}}let I=(a.input==="last"?["change"]:["input","change"]).map(N=>ne(N,d,t)),p=t.defaultView;if(!p)return()=>{I.forEach(N=>N())};let T=p.Object.getOwnPropertyDescriptor(p.HTMLInputElement.prototype,"value"),O=[[p.HTMLInputElement.prototype,"value"],[p.HTMLInputElement.prototype,"checked"],[p.HTMLSelectElement.prototype,"value"],[p.HTMLTextAreaElement.prototype,"value"],[p.HTMLSelectElement.prototype,"selectedIndex"],[p.HTMLOptionElement.prototype,"selected"]];return T&&T.set&&I.push(...O.map(N=>ve(N[0],N[1],{set(){d({target:this})}},!1,p))),()=>{I.forEach(N=>N())}}function ze(e){let t=[];function r(n,o){if(nr&&n.parentRule instanceof CSSGroupingRule||or&&n.parentRule instanceof CSSMediaRule||ir&&n.parentRule instanceof CSSSupportsRule||sr&&n.parentRule instanceof CSSConditionRule){let l=Array.from(n.parentRule.cssRules).indexOf(n);o.unshift(l)}else if(n.parentStyleSheet){let l=Array.from(n.parentStyleSheet.cssRules).indexOf(n);o.unshift(l)}return o}return r(e,t)}function he(e,t,r){let n,o;return e?(e.ownerNode?n=t.getId(e.ownerNode):o=r.getId(e),{styleId:o,id:n}):{}}function Nn({styleSheetRuleCb:e,mirror:t,stylesheetManager:r},{win:n}){let o=n.CSSStyleSheet.prototype.insertRule;n.CSSStyleSheet.prototype.insertRule=function(d,f){let{id:g,styleId:I}=he(this,t,r.styleMirror);return(g&&g!==-1||I&&I!==-1)&&e({id:g,styleId:I,adds:[{rule:d,index:f}]}),o.apply(this,[d,f])};let i=n.CSSStyleSheet.prototype.deleteRule;n.CSSStyleSheet.prototype.deleteRule=function(d){let{id:f,styleId:g}=he(this,t,r.styleMirror);return(f&&f!==-1||g&&g!==-1)&&e({id:f,styleId:g,removes:[{index:d}]}),i.apply(this,[d])};let l;n.CSSStyleSheet.prototype.replace&&(l=n.CSSStyleSheet.prototype.replace,n.CSSStyleSheet.prototype.replace=function(d){let{id:f,styleId:g}=he(this,t,r.styleMirror);return(f&&f!==-1||g&&g!==-1)&&e({id:f,styleId:g,replace:d}),l.apply(this,[d])});let s;n.CSSStyleSheet.prototype.replaceSync&&(s=n.CSSStyleSheet.prototype.replaceSync,n.CSSStyleSheet.prototype.replaceSync=function(d){let{id:f,styleId:g}=he(this,t,r.styleMirror);return(f&&f!==-1||g&&g!==-1)&&e({id:f,styleId:g,replaceSync:d}),s.apply(this,[d])});let a={};nr?a.CSSGroupingRule=n.CSSGroupingRule:(or&&(a.CSSMediaRule=n.CSSMediaRule),sr&&(a.CSSConditionRule=n.CSSConditionRule),ir&&(a.CSSSupportsRule=n.CSSSupportsRule));let c={};return Object.entries(a).forEach(([d,f])=>{c[d]={insertRule:f.prototype.insertRule,deleteRule:f.prototype.deleteRule},f.prototype.insertRule=function(g,I){let{id:p,styleId:T}=he(this.parentStyleSheet,t,r.styleMirror);return(p&&p!==-1||T&&T!==-1)&&e({id:p,styleId:T,adds:[{rule:g,index:[...ze(this),I||0]}]}),c[d].insertRule.apply(this,[g,I])},f.prototype.deleteRule=function(g){let{id:I,styleId:p}=he(this.parentStyleSheet,t,r.styleMirror);return(I&&I!==-1||p&&p!==-1)&&e({id:I,styleId:p,removes:[{index:[...ze(this),g]}]}),c[d].deleteRule.apply(this,[g])}}),()=>{n.CSSStyleSheet.prototype.insertRule=o,n.CSSStyleSheet.prototype.deleteRule=i,l&&(n.CSSStyleSheet.prototype.replace=l),s&&(n.CSSStyleSheet.prototype.replaceSync=s),Object.entries(a).forEach(([d,f])=>{f.prototype.insertRule=c[d].insertRule,f.prototype.deleteRule=c[d].deleteRule})}}function bt({mirror:e,stylesheetManager:t},r){var n,o,i;let l=null;r.nodeName==="#document"?l=e.getId(r):l=e.getId(r.host);let s=r.nodeName==="#document"?(n=r.defaultView)===null||n===void 0?void 0:n.Document:(i=(o=r.ownerDocument)===null||o===void 0?void 0:o.defaultView)===null||i===void 0?void 0:i.ShadowRoot,a=Object.getOwnPropertyDescriptor(s?.prototype,"adoptedStyleSheets");return l===null||l===-1||!s||!a?()=>{}:(Object.defineProperty(r,"adoptedStyleSheets",{configurable:a.configurable,enumerable:a.enumerable,get(){var c;return(c=a.get)===null||c===void 0?void 0:c.call(this)},set(c){var d;let f=(d=a.set)===null||d===void 0?void 0:d.call(this,c);if(l!==null&&l!==-1)try{t.adoptStyleSheets(c,l)}catch{}return f}}),()=>{Object.defineProperty(r,"adoptedStyleSheets",{configurable:a.configurable,enumerable:a.enumerable,get:a.get,set:a.set})})}function Ln({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:r,stylesheetManager:n},{win:o}){let i=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=function(s,a,c){var d;if(r.has(s))return i.apply(this,[s,a,c]);let{id:f,styleId:g}=he((d=this.parentRule)===null||d===void 0?void 0:d.parentStyleSheet,t,n.styleMirror);return(f&&f!==-1||g&&g!==-1)&&e({id:f,styleId:g,set:{property:s,value:a,priority:c},index:ze(this.parentRule)}),i.apply(this,[s,a,c])};let l=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=function(s){var a;if(r.has(s))return l.apply(this,[s]);let{id:c,styleId:d}=he((a=this.parentRule)===null||a===void 0?void 0:a.parentStyleSheet,t,n.styleMirror);return(c&&c!==-1||d&&d!==-1)&&e({id:c,styleId:d,remove:{property:s},index:ze(this.parentRule)}),l.apply(this,[s])},()=>{o.CSSStyleDeclaration.prototype.setProperty=i,o.CSSStyleDeclaration.prototype.removeProperty=l}}function kn({mediaInteractionCb:e,blockClass:t,blockSelector:r,mirror:n,sampling:o}){let i=s=>Re(a=>{let c=Oe(a);if(!c||Y(c,t,r,!0))return;let{currentTime:d,volume:f,muted:g,playbackRate:I}=c;e({type:s,id:n.getId(c),currentTime:d,volume:f,muted:g,playbackRate:I})},o.media||500),l=[ne("play",i(0)),ne("pause",i(1)),ne("seeked",i(2)),ne("volumechange",i(3)),ne("ratechange",i(4))];return()=>{l.forEach(s=>s())}}function Mn({fontCb:e,doc:t}){let r=t.defaultView;if(!r)return()=>{};let n=[],o=new WeakMap,i=r.FontFace;r.FontFace=function(a,c,d){let f=new i(a,c,d);return o.set(f,{family:a,buffer:typeof c!="string",descriptors:d,fontSource:typeof c=="string"?c:JSON.stringify(Array.from(new Uint8Array(c)))}),f};let l=de(t.fonts,"add",function(s){return function(a){return setTimeout(()=>{let c=o.get(a);c&&(e(c),o.delete(a))},0),s.apply(this,[a])}});return n.push(()=>{r.FontFace=i}),n.push(l),()=>{n.forEach(s=>s())}}function On(e){let{doc:t,mirror:r,blockClass:n,blockSelector:o,selectionCb:i}=e,l=!0,s=()=>{let a=t.getSelection();if(!a||l&&a?.isCollapsed)return;l=a.isCollapsed||!1;let c=[],d=a.rangeCount||0;for(let f=0;f<d;f++){let g=a.getRangeAt(f),{startContainer:I,startOffset:p,endContainer:T,endOffset:O}=g;Y(I,n,o,!0)||Y(T,n,o,!0)||c.push({start:r.getId(I),startOffset:p,end:r.getId(T),endOffset:O})}i({ranges:c})};return s(),ne("selectionchange",s)}function xn(e,t){let{mutationCb:r,mousemoveCb:n,mouseInteractionCb:o,scrollCb:i,viewportResizeCb:l,inputCb:s,mediaInteractionCb:a,styleSheetRuleCb:c,styleDeclarationCb:d,canvasMutationCb:f,fontCb:g,selectionCb:I}=e;e.mutationCb=(...p)=>{t.mutation&&t.mutation(...p),r(...p)},e.mousemoveCb=(...p)=>{t.mousemove&&t.mousemove(...p),n(...p)},e.mouseInteractionCb=(...p)=>{t.mouseInteraction&&t.mouseInteraction(...p),o(...p)},e.scrollCb=(...p)=>{t.scroll&&t.scroll(...p),i(...p)},e.viewportResizeCb=(...p)=>{t.viewportResize&&t.viewportResize(...p),l(...p)},e.inputCb=(...p)=>{t.input&&t.input(...p),s(...p)},e.mediaInteractionCb=(...p)=>{t.mediaInteaction&&t.mediaInteaction(...p),a(...p)},e.styleSheetRuleCb=(...p)=>{t.styleSheetRule&&t.styleSheetRule(...p),c(...p)},e.styleDeclarationCb=(...p)=>{t.styleDeclaration&&t.styleDeclaration(...p),d(...p)},e.canvasMutationCb=(...p)=>{t.canvasMutation&&t.canvasMutation(...p),f(...p)},e.fontCb=(...p)=>{t.font&&t.font(...p),g(...p)},e.selectionCb=(...p)=>{t.selection&&t.selection(...p),I(...p)}}function ar(e,t={}){let r=e.doc.defaultView;if(!r)return()=>{};xn(e,t);let n=Ct(e,e.doc),o=Sn(e),i=An(e),l=Et(e),s=Tn(e),a=Rn(e),c=kn(e),d=Nn(e,{win:r}),f=bt(e,e.doc),g=Ln(e,{win:r}),I=e.collectFonts?Mn(e):()=>{},p=On(e),T=[];for(let O of e.plugins)T.push(O.observer(O.callback,r,O.options));return()=>{ge.forEach(O=>O.reset()),n.disconnect(),o(),i(),l(),s(),a(),c(),d(),f(),g(),I(),p(),T.forEach(O=>O())}}var xe=class{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,r,n,o){let i=n||this.getIdToRemoteIdMap(t),l=o||this.getRemoteIdToIdMap(t),s=i.get(r);return s||(s=this.generateIdFn(),i.set(r,s),l.set(s,r)),s}getIds(t,r){let n=this.getIdToRemoteIdMap(t),o=this.getRemoteIdToIdMap(t);return r.map(i=>this.getId(t,i,n,o))}getRemoteId(t,r,n){let o=n||this.getRemoteIdToIdMap(t);if(typeof r!="number")return r;let i=o.get(r);return i||-1}getRemoteIds(t,r){let n=this.getRemoteIdToIdMap(t);return r.map(o=>this.getRemoteId(t,o,n))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let r=this.iframeIdToRemoteIdMap.get(t);return r||(r=new Map,this.iframeIdToRemoteIdMap.set(t,r)),r}getRemoteIdToIdMap(t){let r=this.iframeRemoteIdToIdMap.get(t);return r||(r=new Map,this.iframeRemoteIdToIdMap.set(t,r)),r}};var $e=class{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new xe(ut),this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new xe(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,r){var n;this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:r}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),(n=this.loadListener)===null||n===void 0||n.call(this,t),t.contentDocument&&t.contentDocument.adoptedStyleSheets&&t.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(t.contentDocument.adoptedStyleSheets,this.mirror.getId(t.contentDocument))}handleMessage(t){if(t.data.type==="rrweb"){if(!t.source)return;let n=this.crossOriginIframeMap.get(t.source);if(!n)return;let o=this.transformCrossOriginEvent(n,t.data.event);o&&this.wrappedEmit(o,t.data.isCheckout)}}transformCrossOriginEvent(t,r){var n;switch(r.type){case F.FullSnapshot:return this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(r.data.node,t),{timestamp:r.timestamp,type:F.IncrementalSnapshot,data:{source:x.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:r.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}};case F.Meta:case F.Load:case F.DomContentLoaded:return!1;case F.Plugin:return r;case F.Custom:return this.replaceIds(r.data.payload,t,["id","parentId","previousId","nextId"]),r;case F.IncrementalSnapshot:switch(r.data.source){case x.Mutation:return r.data.adds.forEach(o=>{this.replaceIds(o,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(o.node,t)}),r.data.removes.forEach(o=>{this.replaceIds(o,t,["parentId","id"])}),r.data.attributes.forEach(o=>{this.replaceIds(o,t,["id"])}),r.data.texts.forEach(o=>{this.replaceIds(o,t,["id"])}),r;case x.Drag:case x.TouchMove:case x.MouseMove:return r.data.positions.forEach(o=>{this.replaceIds(o,t,["id"])}),r;case x.ViewportResize:return!1;case x.MediaInteraction:case x.MouseInteraction:case x.Scroll:case x.CanvasMutation:case x.Input:return this.replaceIds(r.data,t,["id"]),r;case x.StyleSheetRule:case x.StyleDeclaration:return this.replaceIds(r.data,t,["id"]),this.replaceStyleIds(r.data,t,["styleId"]),r;case x.Font:return r;case x.Selection:return r.data.ranges.forEach(o=>{this.replaceIds(o,t,["start","end"])}),r;case x.AdoptedStyleSheet:return this.replaceIds(r.data,t,["id"]),this.replaceStyleIds(r.data,t,["styleIds"]),(n=r.data.styles)===null||n===void 0||n.forEach(o=>{this.replaceStyleIds(o,t,["styleId"])}),r}}}replace(t,r,n,o){for(let i of o)!Array.isArray(r[i])&&typeof r[i]!="number"||(Array.isArray(r[i])?r[i]=t.getIds(n,r[i]):r[i]=t.getId(n,r[i]));return r}replaceIds(t,r,n){return this.replace(this.crossOriginIframeMirror,t,r,n)}replaceStyleIds(t,r,n){return this.replace(this.crossOriginIframeStyleMirror,t,r,n)}replaceIdOnNode(t,r){this.replaceIds(t,r,["id"]),"childNodes"in t&&t.childNodes.forEach(n=>{this.replaceIdOnNode(n,r)})}};var je=class{constructor(t){this.shadowDoms=new WeakSet,this.restorePatches=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror;let r=this;this.restorePatches.push(de(Element.prototype,"attachShadow",function(n){return function(o){let i=n.call(this,o);return this.shadowRoot&&r.addShadowRoot(this.shadowRoot,this.ownerDocument),i}}))}addShadowRoot(t,r){Ce(t)&&(this.shadowDoms.has(t)||(this.shadowDoms.add(t),Ct(Object.assign(Object.assign({},this.bypassOptions),{doc:r,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),t),Et(Object.assign(Object.assign({},this.bypassOptions),{scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),setTimeout(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),bt({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t)},0)))}observeAttachShadow(t){if(t.contentWindow){let r=this;this.restorePatches.push(de(t.contentWindow.HTMLElement.prototype,"attachShadow",function(n){return function(o){let i=n.call(this,o);return this.shadowRoot&&r.addShadowRoot(this.shadowRoot,t.contentDocument),i}}))}}reset(){this.restorePatches.forEach(t=>t()),this.shadowDoms=new WeakSet}};function lr(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function cr(e,t,r,n){function o(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function s(d){try{c(n.next(d))}catch(f){l(f)}}function a(d){try{c(n.throw(d))}catch(f){l(f)}}function c(d){d.done?i(d.value):o(d.value).then(s,a)}c((n=n.apply(e,t||[])).next())})}var Ne="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Dn=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(De=0;De<Ne.length;De++)Dn[Ne.charCodeAt(De)]=De;var De,dr=function(e){var t=new Uint8Array(e),r,n=t.length,o="";for(r=0;r<n;r+=3)o+=Ne[t[r]>>2],o+=Ne[(t[r]&3)<<4|t[r+1]>>4],o+=Ne[(t[r+1]&15)<<2|t[r+2]>>6],o+=Ne[t[r+2]&63];return n%3===2?o=o.substring(0,o.length-1)+"=":n%3===1&&(o=o.substring(0,o.length-2)+"=="),o};var ur=new Map;function _n(e,t){let r=ur.get(e);return r||(r=new Map,ur.set(e,r)),r.has(t)||r.set(t,[]),r.get(t)}var vt=(e,t,r)=>{if(!e||!(fr(e,t)||typeof e=="object"))return;let n=e.constructor.name,o=_n(r,n),i=o.indexOf(e);return i===-1&&(i=o.length,o.push(e)),i};function Je(e,t,r){if(e instanceof Array)return e.map(n=>Je(n,t,r));if(e===null)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){let n=e.constructor.name,o=dr(e);return{rr_type:n,base64:o}}else{if(e instanceof DataView)return{rr_type:e.constructor.name,args:[Je(e.buffer,t,r),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){let n=e.constructor.name,{src:o}=e;return{rr_type:n,src:o}}else if(e instanceof HTMLCanvasElement){let n="HTMLImageElement",o=e.toDataURL();return{rr_type:n,src:o}}else{if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[Je(e.data,t,r),e.width,e.height]};if(fr(e,t)||typeof e=="object"){let n=e.constructor.name,o=vt(e,t,r);return{rr_type:n,index:o}}}}return e}var Qe=(e,t,r)=>[...e].map(n=>Je(n,t,r)),fr=(e,t)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(o=>typeof t[o]=="function").find(o=>e instanceof t[o]);function mr(e,t,r,n){let o=[],i=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(let l of i)try{if(typeof t.CanvasRenderingContext2D.prototype[l]!="function")continue;let s=de(t.CanvasRenderingContext2D.prototype,l,function(a){return function(...c){return Y(this.canvas,r,n,!0)||setTimeout(()=>{let d=Qe([...c],t,this);e(this.canvas,{type:pe["2D"],property:l,args:d})},0),a.apply(this,c)}});o.push(s)}catch{let a=ve(t.CanvasRenderingContext2D.prototype,l,{set(c){e(this.canvas,{type:pe["2D"],property:l,args:[c],setter:!0})}});o.push(a)}return()=>{o.forEach(l=>l())}}function St(e,t,r){let n=[];try{let o=de(e.HTMLCanvasElement.prototype,"getContext",function(i){return function(l,...s){return Y(this,t,r,!0)||"__context"in this||(this.__context=l),i.apply(this,[l,...s])}});n.push(o)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{n.forEach(o=>o())}}function pr(e,t,r,n,o,i,l){let s=[],a=Object.getOwnPropertyNames(e);for(let c of a)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(c))try{if(typeof e[c]!="function")continue;let d=de(e,c,function(f){return function(...g){let I=f.apply(this,g);if(vt(I,l,this),!Y(this.canvas,n,o,!0)){let p=Qe([...g],l,this),T={type:t,property:c,args:p};r(this.canvas,T)}return I}});s.push(d)}catch{let f=ve(e,c,{set(g){r(this.canvas,{type:t,property:c,args:[g],setter:!0})}});s.push(f)}return s}function hr(e,t,r,n,o){let i=[];return i.push(...pr(t.WebGLRenderingContext.prototype,pe.WebGL,e,r,n,o,t)),typeof t.WebGL2RenderingContext<"u"&&i.push(...pr(t.WebGL2RenderingContext.prototype,pe.WebGL2,e,r,n,o,t)),()=>{i.forEach(l=>l())}}var At=null;try{gr=typeof module<"u"&&typeof module.require=="function"&&module.require("worker_threads")||typeof __non_webpack_require__=="function"&&__non_webpack_require__("worker_threads")||typeof st=="function"&&st("worker_threads"),At=gr.Worker}catch{}var gr;function Fn(e,t){return Buffer.from(e,"base64").toString(t?"utf16":"utf8")}function yr(e,t,r){var n=t===void 0?null:t,o=r===void 0?!1:r,i=Fn(e,o),l=i.indexOf(`
`,10)+1,s=i.substring(l)+(n?"//# sourceMappingURL="+n:"");return function(c){return new At(s,Object.assign({},c,{eval:!0}))}}function Bn(e,t){var r=atob(e);if(t){for(var n=new Uint8Array(r.length),o=0,i=r.length;o<i;++o)n[o]=r.charCodeAt(o);return String.fromCharCode.apply(null,new Uint16Array(n.buffer))}return r}function Wn(e,t,r){var n=t===void 0?null:t,o=r===void 0?!1:r,i=Bn(e,o),l=i.indexOf(`
`,10)+1,s=i.substring(l)+(n?"//# sourceMappingURL="+n:""),a=new Blob([s],{type:"application/javascript"});return URL.createObjectURL(a)}function Ir(e,t,r){var n;return function(i){return n=n||Wn(e,t,r),new Worker(n,i)}}var Hn=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";function Cr(){return Hn}function Er(e,t,r){return Cr()?yr(e,t,r):Ir(e,t,r)}var br=Er("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIC8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAgIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLg0KDQogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55DQogICAgcHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLg0KDQogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgNCiAgICBSRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkNCiAgICBBTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsDQogICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NDQogICAgTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1INCiAgICBPVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SDQogICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4NCiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqLw0KDQogICAgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikgew0KICAgICAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH0NCiAgICAgICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvclsidGhyb3ciXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfQ0KICAgICAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpOw0KICAgICAgICB9KTsNCiAgICB9CgogICAgLyoKICAgICAqIGJhc2U2NC1hcnJheWJ1ZmZlciAxLjAuMSA8aHR0cHM6Ly9naXRodWIuY29tL25pa2xhc3ZoL2Jhc2U2NC1hcnJheWJ1ZmZlcj4KICAgICAqIENvcHlyaWdodCAoYykgMjAyMSBOaWtsYXMgdm9uIEhlcnR6ZW4gPGh0dHBzOi8vaGVydHplbi5jb20+CiAgICAgKiBSZWxlYXNlZCB1bmRlciBNSVQgTGljZW5zZQogICAgICovCiAgICB2YXIgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7CiAgICAvLyBVc2UgYSBsb29rdXAgdGFibGUgdG8gZmluZCB0aGUgaW5kZXguCiAgICB2YXIgbG9va3VwID0gdHlwZW9mIFVpbnQ4QXJyYXkgPT09ICd1bmRlZmluZWQnID8gW10gOiBuZXcgVWludDhBcnJheSgyNTYpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7IGkrKykgewogICAgICAgIGxvb2t1cFtjaGFycy5jaGFyQ29kZUF0KGkpXSA9IGk7CiAgICB9CiAgICB2YXIgZW5jb2RlID0gZnVuY3Rpb24gKGFycmF5YnVmZmVyKSB7CiAgICAgICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpLCBpLCBsZW4gPSBieXRlcy5sZW5ndGgsIGJhc2U2NCA9ICcnOwogICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMykgewogICAgICAgICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaV0gPj4gMl07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1soKGJ5dGVzW2ldICYgMykgPDwgNCkgfCAoYnl0ZXNbaSArIDFdID4+IDQpXTsKICAgICAgICAgICAgYmFzZTY0ICs9IGNoYXJzWygoYnl0ZXNbaSArIDFdICYgMTUpIDw8IDIpIHwgKGJ5dGVzW2kgKyAyXSA+PiA2KV07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1tieXRlc1tpICsgMl0gJiA2M107CiAgICAgICAgfQogICAgICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgJz0nOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgJz09JzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJhc2U2NDsKICAgIH07CgogICAgY29uc3QgbGFzdEJsb2JNYXAgPSBuZXcgTWFwKCk7DQogICAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gbmV3IE1hcCgpOw0KICAgIGZ1bmN0aW9uIGdldFRyYW5zcGFyZW50QmxvYkZvcih3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucykgew0KICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgew0KICAgICAgICAgICAgY29uc3QgaWQgPSBgJHt3aWR0aH0tJHtoZWlnaHR9YDsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgaWYgKHRyYW5zcGFyZW50QmxvYk1hcC5oYXMoaWQpKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNwYXJlbnRCbG9iTWFwLmdldChpZCk7DQogICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsNCiAgICAgICAgICAgICAgICBvZmZzY3JlZW4uZ2V0Q29udGV4dCgnMmQnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0geWllbGQgYmxvYi5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7DQogICAgICAgICAgICAgICAgdHJhbnNwYXJlbnRCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZTY0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9DQogICAgY29uc3Qgd29ya2VyID0gc2VsZjsNCiAgICB3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgY29uc3QgeyBpZCwgYml0bWFwLCB3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucyB9ID0gZS5kYXRhOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zKTsNCiAgICAgICAgICAgICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IG9mZnNjcmVlbi5nZXRDb250ZXh0KCcyZCcpOw0KICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoYml0bWFwLCAwLCAwKTsNCiAgICAgICAgICAgICAgICBiaXRtYXAuY2xvc2UoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBibG9iLnR5cGU7DQogICAgICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSB5aWVsZCBibG9iLmFycmF5QnVmZmVyKCk7DQogICAgICAgICAgICAgICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlKGFycmF5QnVmZmVyKTsNCiAgICAgICAgICAgICAgICBpZiAoIWxhc3RCbG9iTWFwLmhhcyhpZCkgJiYgKHlpZWxkIHRyYW5zcGFyZW50QmFzZTY0KSA9PT0gYmFzZTY0KSB7DQogICAgICAgICAgICAgICAgICAgIGxhc3RCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7DQogICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgICAgaWQsDQogICAgICAgICAgICAgICAgICAgIHR5cGUsDQogICAgICAgICAgICAgICAgICAgIGJhc2U2NCwNCiAgICAgICAgICAgICAgICAgICAgd2lkdGgsDQogICAgICAgICAgICAgICAgICAgIGhlaWdodCwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfTsKCn0pKCk7Cgo=",null,!1);var qe=class{constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(a,c)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(a)||this.pendingCanvasMutations.set(a,[]),this.pendingCanvasMutations.get(a).push(c)};let{sampling:r="all",win:n,blockClass:o,blockSelector:i,recordCanvas:l,dataURLOptions:s}=t;this.mutationCb=t.mutationCb,this.mirror=t.mirror,l&&r==="all"&&this.initCanvasMutationObserver(n,o,i),l&&typeof r=="number"&&this.initCanvasFPSObserver(r,n,o,i,{dataURLOptions:s})}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(t,r,n,o,i){let l=St(r,n,o),s=new Map,a=new br;a.onmessage=p=>{let{id:T}=p.data;if(s.set(T,!1),!("base64"in p.data))return;let{base64:O,type:N,width:E,height:b}=p.data;this.mutationCb({id:T,type:pe["2D"],commands:[{property:"clearRect",args:[0,0,E,b]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:O}],type:N}]},0,0]}]})};let c=1e3/t,d=0,f,g=()=>{let p=[];return r.document.querySelectorAll("canvas").forEach(T=>{Y(T,n,o,!0)||p.push(T)}),p},I=p=>{if(d&&p-d<c){f=requestAnimationFrame(I);return}d=p,g().forEach(T=>cr(this,void 0,void 0,function*(){var O;let N=this.mirror.getId(T);if(s.get(N))return;if(s.set(N,!0),["webgl","webgl2"].includes(T.__context)){let b=T.getContext(T.__context);((O=b?.getContextAttributes())===null||O===void 0?void 0:O.preserveDrawingBuffer)===!1&&b?.clear(b.COLOR_BUFFER_BIT)}let E=yield createImageBitmap(T);a.postMessage({id:N,bitmap:E,width:T.width,height:T.height,dataURLOptions:i.dataURLOptions},[E])})),f=requestAnimationFrame(I)};f=requestAnimationFrame(I),this.resetObservers=()=>{l(),cancelAnimationFrame(f)}}initCanvasMutationObserver(t,r,n){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();let o=St(t,r,n),i=mr(this.processMutation.bind(this),t,r,n),l=hr(this.processMutation.bind(this),t,r,n,this.mirror);this.resetObservers=()=>{o(),i(),l()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){let t=r=>{this.rafStamps.latestId=r,requestAnimationFrame(t)};requestAnimationFrame(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((t,r)=>{let n=this.mirror.getId(r);this.flushPendingCanvasMutationFor(r,n)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(t,r){if(this.frozen||this.locked)return;let n=this.pendingCanvasMutations.get(t);if(!n||r===-1)return;let o=n.map(l=>lr(l,["type"])),{type:i}=n[0];this.mutationCb({id:r,type:i,commands:o}),this.pendingCanvasMutations.delete(t)}};var Xe=class{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new We,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,r){"_cssText"in r.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:r.id,attributes:r.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,r){if(t.length===0)return;let n={id:r,styleIds:[]},o=[];for(let i of t){let l;if(this.styleMirror.has(i))l=this.styleMirror.getId(i);else{l=this.styleMirror.add(i);let s=Array.from(i.rules||CSSRule);o.push({styleId:l,rules:s.map((a,c)=>({rule:dt(a),index:c}))})}n.styleIds.push(l)}o.length>0&&(n.styles=o),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}};function Q(e){return Object.assign(Object.assign({},e),{timestamp:Date.now()})}var z,et,Tt,tt=!1,ue=Kt();function Se(e={}){let{emit:t,checkoutEveryNms:r,checkoutEveryNth:n,blockClass:o="rr-block",blockSelector:i=null,ignoreClass:l="rr-ignore",maskTextClass:s="rr-mask",maskTextSelector:a=null,inlineStylesheet:c=!0,maskAllInputs:d,maskInputOptions:f,slimDOMOptions:g,maskInputFn:I,maskTextFn:p,hooks:T,packFn:O,sampling:N={},dataURLOptions:E={},mousemoveWait:b,recordCanvas:W=!1,recordCrossOriginIframes:te=!1,userTriggeredOnInput:$=!1,collectFonts:J=!1,inlineImages:H=!1,plugins:oe,keepIframeSrcFn:ie=()=>!1,ignoreCSSAttributes:u=new Set([])}=e,y=te?window.parent===window:!0,v=!1;if(!y)try{window.parent.document,v=!1}catch{v=!0}if(y&&!t)throw new Error("emit function is required");b!==void 0&&N.mousemove===void 0&&(N.mousemove=b),ue.reset();let h=d===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:f!==void 0?f:{password:!0},C=g===!0||g==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:g==="all",headMetaDescKeywords:g==="all"}:g||{};$t();let S,L=0,k=R=>{for(let q of oe||[])q.eventProcessor&&(R=q.eventProcessor(R));return O&&(R=O(R)),R};z=(R,q)=>{var re;if(!((re=ge[0])===null||re===void 0)&&re.isFrozen()&&R.type!==F.FullSnapshot&&!(R.type===F.IncrementalSnapshot&&R.data.source===x.Mutation)&&ge.forEach(P=>P.unfreeze()),y)t?.(k(R),q);else if(v){let P={type:"rrweb",event:k(R),isCheckout:q};window.parent.postMessage(P,"*")}if(R.type===F.FullSnapshot)S=R,L=0;else if(R.type===F.IncrementalSnapshot){if(R.data.source===x.Mutation&&R.data.isAttachIframe)return;L++;let P=n&&L>=n,X=r&&R.timestamp-S.timestamp>r;(P||X)&&et(!0)}};let A=R=>{z(Q({type:F.IncrementalSnapshot,data:Object.assign({source:x.Mutation},R)}))},w=R=>z(Q({type:F.IncrementalSnapshot,data:Object.assign({source:x.Scroll},R)})),D=R=>z(Q({type:F.IncrementalSnapshot,data:Object.assign({source:x.CanvasMutation},R)})),M=R=>z(Q({type:F.IncrementalSnapshot,data:Object.assign({source:x.AdoptedStyleSheet},R)})),U=new Xe({mutationCb:A,adoptedStyleSheetCb:M}),K=new $e({mirror:ue,mutationCb:A,stylesheetManager:U,recordCrossOriginIframes:te,wrappedEmit:z});for(let R of oe||[])R.getMirror&&R.getMirror({nodeMirror:ue,crossOriginIframeMirror:K.crossOriginIframeMirror,crossOriginIframeStyleMirror:K.crossOriginIframeStyleMirror});Tt=new qe({recordCanvas:W,mutationCb:D,win:window,blockClass:o,blockSelector:i,mirror:ue,sampling:N.canvas,dataURLOptions:E});let ce=new je({mutationCb:A,scrollCb:w,bypassOptions:{blockClass:o,blockSelector:i,maskTextClass:s,maskTextSelector:a,inlineStylesheet:c,maskInputOptions:h,dataURLOptions:E,maskTextFn:p,maskInputFn:I,recordCanvas:W,inlineImages:H,sampling:N,slimDOMOptions:C,iframeManager:K,stylesheetManager:U,canvasManager:Tt,keepIframeSrcFn:ie},mirror:ue});et=(R=!1)=>{var q,re,P,X,B,Z;z(Q({type:F.Meta,data:{href:window.location.href,width:Pe(),height:He()}}),R),U.reset(),ge.forEach(se=>se.lock());let ye=Zt(document,{mirror:ue,blockClass:o,blockSelector:i,maskTextClass:s,maskTextSelector:a,inlineStylesheet:c,maskAllInputs:h,maskTextFn:p,slimDOM:C,dataURLOptions:E,recordCanvas:W,inlineImages:H,onSerialize:se=>{Ue(se,ue)&&K.addIframe(se),Ve(se,ue)&&U.trackLinkElement(se),Ke(se)&&ce.addShadowRoot(se.shadowRoot,document)},onIframeLoad:(se,it)=>{K.attachIframe(se,it),ce.observeAttachShadow(se)},onStylesheetLoad:(se,it)=>{U.attachLinkElement(se,it)},keepIframeSrcFn:ie});if(!ye)return console.warn("Failed to snapshot the document");z(Q({type:F.FullSnapshot,data:{node:ye,initialOffset:{left:window.pageXOffset!==void 0?window.pageXOffset:document?.documentElement.scrollLeft||((re=(q=document?.body)===null||q===void 0?void 0:q.parentElement)===null||re===void 0?void 0:re.scrollLeft)||((P=document?.body)===null||P===void 0?void 0:P.scrollLeft)||0,top:window.pageYOffset!==void 0?window.pageYOffset:document?.documentElement.scrollTop||((B=(X=document?.body)===null||X===void 0?void 0:X.parentElement)===null||B===void 0?void 0:B.scrollTop)||((Z=document?.body)===null||Z===void 0?void 0:Z.scrollTop)||0}}})),ge.forEach(se=>se.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&U.adoptStyleSheets(document.adoptedStyleSheets,ue.getId(document))};try{let R=[];R.push(ne("DOMContentLoaded",()=>{z(Q({type:F.DomContentLoaded,data:{}}))}));let q=P=>{var X;return ar({mutationCb:A,mousemoveCb:(B,Z)=>z(Q({type:F.IncrementalSnapshot,data:{source:Z,positions:B}})),mouseInteractionCb:B=>z(Q({type:F.IncrementalSnapshot,data:Object.assign({source:x.MouseInteraction},B)})),scrollCb:w,viewportResizeCb:B=>z(Q({type:F.IncrementalSnapshot,data:Object.assign({source:x.ViewportResize},B)})),inputCb:B=>z(Q({type:F.IncrementalSnapshot,data:Object.assign({source:x.Input},B)})),mediaInteractionCb:B=>z(Q({type:F.IncrementalSnapshot,data:Object.assign({source:x.MediaInteraction},B)})),styleSheetRuleCb:B=>z(Q({type:F.IncrementalSnapshot,data:Object.assign({source:x.StyleSheetRule},B)})),styleDeclarationCb:B=>z(Q({type:F.IncrementalSnapshot,data:Object.assign({source:x.StyleDeclaration},B)})),canvasMutationCb:D,fontCb:B=>z(Q({type:F.IncrementalSnapshot,data:Object.assign({source:x.Font},B)})),selectionCb:B=>{z(Q({type:F.IncrementalSnapshot,data:Object.assign({source:x.Selection},B)}))},blockClass:o,ignoreClass:l,maskTextClass:s,maskTextSelector:a,maskInputOptions:h,inlineStylesheet:c,sampling:N,recordCanvas:W,inlineImages:H,userTriggeredOnInput:$,collectFonts:J,doc:P,maskInputFn:I,maskTextFn:p,keepIframeSrcFn:ie,blockSelector:i,slimDOMOptions:C,dataURLOptions:E,mirror:ue,iframeManager:K,stylesheetManager:U,shadowDomManager:ce,canvasManager:Tt,ignoreCSSAttributes:u,plugins:((X=oe?.filter(B=>B.observer))===null||X===void 0?void 0:X.map(B=>({observer:B.observer,options:B.options,callback:Z=>z(Q({type:F.Plugin,data:{plugin:B.name,payload:Z}}))})))||[]},T)};K.addLoadListener(P=>{R.push(q(P.contentDocument))});let re=()=>{et(),R.push(q(document)),tt=!0};return document.readyState==="interactive"||document.readyState==="complete"?re():R.push(ne("load",()=>{z(Q({type:F.Load,data:{}})),re()},window)),()=>{R.forEach(P=>P()),tt=!1}}catch(R){console.warn(R)}}Se.addCustomEvent=(e,t)=>{if(!tt)throw new Error("please add custom event after start recording");z(Q({type:F.Custom,data:{tag:e,payload:t}}))};Se.freezePage=()=>{ge.forEach(e=>e.freeze())};Se.takeFullSnapshot=e=>{if(!tt)throw new Error("please take full snapshot after start recording");et(e)};Se.mirror=ue;var vr=[],Sr=()=>{let e=Se({emit(t){vr.push(t),_({type:"RRWEB_EVENT",event:t})},maskInputOptions:{password:!0},maskTextSelector:"input, textarea",ignoreClass:"rrweb-ignore"});return setInterval(()=>{vr=[]},6e4),e};var Ar=()=>{let e=!1,t=()=>{_({type:"SCROLL_POSITION",payload:{scrollY:window.scrollY,scrollHeight:document.documentElement.scrollHeight,clientHeight:window.innerHeight,timestamp:Date.now()}}),e=!1},r=()=>{e||(requestAnimationFrame(t),e=!0)};window.addEventListener("scroll",r)},Tr=()=>{let e=!1;function t(){return document.documentElement.scrollHeight>document.documentElement.clientHeight}function r(){e||t()&&(e=!0,_({type:"SCROLLABLE"}))}r(),document.readyState==="loading"&&document.addEventListener("DOMContentLoaded",r),window.addEventListener("load",r),setTimeout(r,500)};var Gn=e=>{let t=r=>{let o={type:"node",children:[],attrs:[...r.attributes].reduce((i,l)=>(i[l.name]=l.value,i),{}),tagName:r.tagName,data:Le(r)};return[...r.childNodes].forEach(i=>{i instanceof HTMLElement?o.children.push(t(i)):i instanceof Text&&o.children.push({type:"text",textContent:i.textContent||""})}),o};return t(e)},wr=async()=>{await Ft();let e=Gn(document.querySelector("#root"));_({type:"COMPONENT_TREE",payload:{tree:e}})};var Rr=()=>{window.addEventListener("keydown",e=>{let t=[];e.metaKey&&t.push("Meta"),e.ctrlKey&&t.push("Ctrl"),e.altKey&&t.push("Alt"),e.shiftKey&&t.push("Shift");let r=e.key!=="Meta"&&e.key!=="Control"&&e.key!=="Alt"&&e.key!=="Shift"?e.key:"",n=[...t,r].filter(Boolean).join("+");["Meta+z","Meta+Backspace","Meta+d","Meta+b","Ctrl+b","Alt+s","Alt+\xDF"].includes(n)&&e.preventDefault(),n&&_({type:"KEYBIND",payload:{compositeKey:n,rawEvent:{key:e.key,code:e.code,metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey},timestamp:Date.now()}})},{passive:!0})};var fe=e=>(e.includes("dev_server")&&(e=e.split("dev_server")[1].slice(1)),e.includes("sandbox-scheduler/sandbox")&&(e=e.split("sandbox-scheduler/")[1].split("/").slice(1).join("/")),e.replace(/^\/dev-server\//,"")),wt=e=>e.replace(/^\/dev-server\//,"");function Rt(e){for(let t in e){let r=t;if(r.startsWith("__reactFiber$")||r.startsWith("__reactContainer$"))return e[r]}return null}var Un=0,Vn=1,Kn=11,Zn=14,Yn=7,zn=10,$n=9;function jn(e){return e?typeof e.type=="function"||[Un,Vn,Kn,Zn].includes(e.tag):!1}function Jn(e){return e?[Yn,zn,$n].includes(e.tag):!1}function Nr(e){return e?typeof e.type!="string"?e.type?.displayName||e.type?.name||"Anonymous":typeof e.type=="string"?e.type:"Unknown":"Unknown"}function Lr(e){let t=e,r=t.return;for(;r&&Jn(r);)r=r.return;if(r&&jn(r)&&r._debugSource)return{...r._debugSource,fileName:fe(wt(r._debugSource.fileName)),displayName:Nr(r)};for(t=e;t;){if(t._debugSource)return{...t._debugSource,fileName:fe(wt(t._debugSource.fileName)),displayName:Nr(t)};t=t.return}return null}function Qn(e){let t=Rt(e);if(!t)return null;let r=Lr(t);return r?{filePath:fe(r.fileName),lineNumber:r.lineNumber,col:r.columnNumber,displayName:r.displayName}:null}function qn(){let e=[],t=document.getElementById("root")||document.body,r=Rt(t);if(r){let o=r;for(;o.return;)o=o.return;e.push(o)}let n=document.querySelectorAll('[data-reactroot], #root, [id*="root"]');for(let o of Array.from(n)){let i=Rt(o);if(i){let l=i;for(;l.return;)l=l.return;e.includes(l)||e.push(l)}}return e}function Xn(e,t){let r=[];function n(o){if(!o)return;if(o.stateNode?.nodeType===Node.ELEMENT_NODE){let l=Lr(o);l&&fe(l.fileName)===fe(t.fileName)&&l.lineNumber===t.lineNumber&&l.columnNumber===t.columnNumber&&r.push(o)}let i=o.child;for(;i;)n(i),i=i.sibling}return n(e),r}function eo(e){let r={fileName:fe(e.filePath),lineNumber:e.lineNumber,columnNumber:e.col??0},n=[],o=qn();for(let i of o){let l=Xn(i,r);n.push(...l)}return n.map(i=>i.stateNode).filter(i=>!!i)}var _e=class{constructor(){this.getElementIdFromDomNode=Qn;this.findAllElementsById=eo}};var kr=Symbol.for("__jsxSource__");function to(e){return`${e.filePath}:${e.lineNumber}:${e.columnNumber}`}function ro(e){let t=to(e),r=window.sourceElementMap?.get(t);if(!r)return[];let n=[];for(let o of r){let i=o.deref();i&&document.contains(i)?n.push(i):r.delete(o)}return r.size===0&&window.sourceElementMap?.delete(t),n}var Fe=class{getElementIdFromDomNode(t){let r=t[kr];if(r)return{filePath:fe(r.fileName),lineNumber:r.lineNumber,col:r.columnNumber,displayName:r.displayName};let n=t.parentElement;for(;n;){let o=n[kr];if(o)return{filePath:fe(o.fileName),lineNumber:o.lineNumber,col:o.columnNumber,displayName:o.displayName};n=n.parentElement}return null}findAllElementsById(t){return ro?.({filePath:fe(t.filePath),lineNumber:t.lineNumber,columnNumber:t.col??0})??[]}};var V=new _e,Mr;Object.defineProperty(window,"sourceElementMap",{set(e){Mr=e,V=e?new Fe:new _e},get(){return Mr}});window.sourceElementMap&&(V=new Fe);window.LOV_SELECTOR_SCRIPT_VERSION="1.1.4";var Or=2e3,Ot=e=>e.length<=Or?e:e.slice(0,Or)+"... [truncated]",rt=({filePath:e,lineNumber:t,col:r})=>`${e}:${t}:${r||0}`,Nt=e=>{let[t,r,n]=e.split(":");return{filePath:t,lineNumber:parseInt(r,10),col:parseInt(n,10)||0}},ae=e=>{let t=V.getElementIdFromDomNode(e)??null;return{filePath:t?.filePath??"",lineNumber:t?.lineNumber??0,col:t?.col??0,displayName:t?.displayName??void 0}},xr=e=>{let t=e?.parentElement;return!t||t.id==="root"||["HTML","BODY"].includes(t.tagName)?null:t},nt=e=>{let t=e.tagName.toLowerCase(),r=e.getAttribute("data-updated-icon-name");return r||V.getElementIdFromDomNode(e)?.displayName||t},Lt=e=>{Math.abs(e.getBoundingClientRect().width-window.innerWidth)<5&&e.setAttribute("data-full-width","true"),nt(e)===m.INDEX_COMPONENT_NAME&&e.setAttribute("data-lov-index","true")};function Dr(e,t){return e?.filePath===t?.filePath&&e?.lineNumber===t?.lineNumber&&e?.col===t?.col}var _r=e=>{let t={};try{if(!(e instanceof HTMLElement))return t;let r=a=>{let c={};for(let d=0;d<a.length;d++){let f=a[d];if(f&&f.startsWith("--"))try{let g=a.getPropertyValue(f).trim();g&&(c[f]=g)}catch{}}return c},n=window.getComputedStyle(document.documentElement),o=r(n);Object.assign(t,o);let i=window.getComputedStyle(e),l=r(i);Object.assign(t,l);let s=e.style;for(let a=0;a<s.length;a++){let c=s[a];if(c&&c.startsWith("--"))try{let d=s.getPropertyValue(c).trim();d&&(t[c]=d)}catch{}}}catch(r){console.warn("Error extracting CSS variables:",r)}return t},Fr=/url\((?:"([^"]*)"|'([^']*)'|([^)]*))\)/,no=/bg-\[url\((?:"([^"]*)"|'([^']*)'|([^)]*))\)\]/,kt=(e,t)=>{if(!e)return null;try{return{url:new URL(e,window.location.href).href,source:t}}catch{return{url:e,source:t}}},Mt=e=>e&&(e[1]||e[2]||e[3])||"",Br=e=>{if(!(e instanceof HTMLElement))return null;let t=e.getAttribute("class")||"";if(e.style.backgroundImage&&e.style.backgroundImage!=="none"){let o=e.style.backgroundImage.match(Fr),i=kt(Mt(o),"inline");if(i)return i}let r=t.match(no),n=kt(Mt(r),"tailwind");if(n)return n;try{let o=window.getComputedStyle(e);if(o.backgroundImage&&o.backgroundImage!=="none"){let i=o.backgroundImage.match(Fr),l=kt(Mt(i),"css");if(l)return l}}catch{}return null},Wr=e=>{let t=[],r=0;for(let n of Array.from(e.childNodes))if(n.nodeType===Node.TEXT_NODE){let i=(n.textContent||"").trim();i&&(t.push({type:"text",content:i,editable:!0,index:r}),r++)}else if(n.nodeType===Node.ELEMENT_NODE){let o=n,i=o.tagName.toLowerCase();t.push({type:"element",tagName:i,textContent:Ot(o.textContent||""),editable:!1,index:r}),r++}return t},Le=e=>{let t=e.tagName.toLowerCase(),r=nt(e),n=e.getAttribute("data-component-content")||null,o=Array.from(e.children).filter(s=>!Dr(ae(s),ae(e))).filter((s,a,c)=>a===c.findIndex(d=>Dr(ae(d),ae(s)))).map(s=>{let a=s.tagName.toLowerCase(),c=nt(s),d=_r(s),f=Br(s);return{filePath:ae(s)?.filePath??"",lineNumber:ae(s)?.lineNumber??0,col:ae(s)?.col,elementType:a,componentName:c,content:s.getAttribute("data-component-content")||"",className:s.getAttribute("class")||"",textContent:Ot(s.textContent||""),textNodes:Wr(s),attrs:{src:(()=>{let g=s.getAttribute("src");if(!g)return"";if(s.tagName.toLowerCase()==="img")try{return new URL(g,window.location.href).href}catch{return g}return g})(),placeholder:s.getAttribute("placeholder")||"",href:s.getAttribute("href")||"",type:s.getAttribute("type")||"",value:s.getAttribute("value")||"",backgroundImage:f?.url??"",backgroundImageSource:f?.source??""},cssVariables:d}}),i=_r(e),l=Br(e);return{filePath:ae(e)?.filePath??"",lineNumber:ae(e)?.lineNumber??0,col:ae(e)?.col,elementType:t,componentName:r,content:n||"",children:o,className:e.getAttribute("class")||"",textContent:Ot(e.textContent||""),textNodes:Wr(e),attrs:{src:(()=>{let s=e.getAttribute("src");if(!s)return"";if(e.tagName.toLowerCase()==="img")try{return new URL(s,window.location.href).href}catch{return s}return s})(),placeholder:e.getAttribute("placeholder")||"",href:e.getAttribute("href")||"",type:e.getAttribute("type")||"",value:e.getAttribute("value")||"",backgroundImage:l?.url??"",backgroundImageSource:l?.source??""},cssVariables:i}},Hr=()=>{class e{constructor(){this.hoveredElement=null,this.isActive=!1,this.selectedTooltips=new Map,this.clickedElementMap=new Map,this.scrollTimeout=null,this.mouseX=0,this.mouseY=0,this.styleElement=null}reset(){this.hoveredElement=null,this.scrollTimeout=null,this.selectedTooltips.forEach(y=>y.remove()),this.selectedTooltips.clear()}}let t=new e,r=(u,y)=>{let v=null;return(...h)=>{v&&clearTimeout(v),v=setTimeout(()=>u(...h),y)}};Rr();let n=()=>{let u=document.createElement("style"),y=":not(input):not(img):not(textarea):not(select):not(video):not(audio):not(iframe):not(canvas):not(svg)";u.textContent=`
        .gpt-selected-tooltip {
          position: fixed;
          z-index: ${m.Z_INDEX};
          pointer-events: none;
          background-color: ${m.HIGHLIGHT_COLOR};
          color: white;
          padding: 4px 8px;
          border-radius: 4px;
          font-size: 14px;
          font-weight: bold;
          line-height: 1;
          white-space: nowrap;
          display: block;
          box-shadow: 0 2px 4px rgba(0,0,0,0.2);
          margin: -2px 0px;
          border: 1px solid rgba(255,255,255,0.3);
        }
        /* Hovered state: Uses pseudo-elements for standard elements */
        /* Primary hovered instance (directly under mouse) - solid border */
        [${m.HOVERED_ATTR}][${m.PRIMARY_ATTR}]${y} {
          position: relative;
        }
        [${m.HOVERED_ATTR}][${m.PRIMARY_ATTR}]${y}::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          border-radius: 0px;
          outline: 2px solid ${m.HIGHLIGHT_COLOR} !important;
          outline-offset: ${m.HIGHLIGHT_STYLE.NORMAL.OFFSET} !important;
          z-index: ${m.Z_INDEX};
          pointer-events: none;
        }
        /* Secondary hovered instances - dotted border */
        [${m.HOVERED_ATTR}]:not([${m.PRIMARY_ATTR}])${y} {
          position: relative;
        }
        [${m.HOVERED_ATTR}]:not([${m.PRIMARY_ATTR}])${y}::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          border-radius: 0px;
          outline: 2px dotted ${m.HIGHLIGHT_COLOR} !important;
          outline-offset: ${m.HIGHLIGHT_STYLE.NORMAL.OFFSET} !important;
          z-index: ${m.Z_INDEX};
          pointer-events: none;
        }
        
        /* Selected state: Uses pseudo-elements for standard elements */
        /* Primary selected instance (directly clicked) - solid border */
        [${m.SELECTED_ATTR}][${m.PRIMARY_ATTR}]${y} {
          position: relative;
        }
        [${m.SELECTED_ATTR}][${m.PRIMARY_ATTR}]${y}::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          border-radius: 0px;
          outline: 1px solid ${m.HIGHLIGHT_COLOR} !important;
          z-index: ${m.Z_INDEX};
          pointer-events: none;
        }
        /* Secondary selected instances - dotted border */
        [${m.SELECTED_ATTR}]:not([${m.PRIMARY_ATTR}])${y} {
          position: relative;
        }
        [${m.SELECTED_ATTR}]:not([${m.PRIMARY_ATTR}])${y}::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          border-radius: 0px;
          outline: 1px dotted ${m.HIGHLIGHT_COLOR} !important;
          z-index: ${m.Z_INDEX};
          pointer-events: none;
        }
        
        /* Primary replaced elements - solid */
        :is(input, img, textarea, select, video, audio, iframe, canvas, svg)[${m.HOVERED_ATTR}][${m.PRIMARY_ATTR}] {
          outline: 2px solid ${m.HIGHLIGHT_COLOR} !important;
          outline-offset: ${m.HIGHLIGHT_STYLE.NORMAL.OFFSET} !important;
        }
        /* Secondary replaced elements - dotted */
        :is(input, img, textarea, select, video, audio, iframe, canvas, svg)[${m.HOVERED_ATTR}]:not([${m.PRIMARY_ATTR}]) {
          outline: 2px dotted ${m.HIGHLIGHT_COLOR} !important;
          outline-offset: ${m.HIGHLIGHT_STYLE.NORMAL.OFFSET} !important;
        }
        
        /* Primary selected replaced elements - solid */
        :is(input, img, textarea, select, video, audio, iframe, canvas, svg)[${m.SELECTED_ATTR}][${m.PRIMARY_ATTR}] {
          outline: 1px solid ${m.HIGHLIGHT_COLOR} !important;
          outline-offset: 0 !important;
        }
        /* Secondary selected replaced elements - dotted */
        :is(input, img, textarea, select, video, audio, iframe, canvas, svg)[${m.SELECTED_ATTR}]:not([${m.PRIMARY_ATTR}]) {
          outline: 1px dotted ${m.HIGHLIGHT_COLOR} !important;
          outline-offset: 0 !important;
        }
        
        /* Remove outline from contenteditable selected elements to avoid conflicts */
        [${m.SELECTED_ATTR}][contenteditable] {
          outline: none !important;
        }

        /* Full-width elements use different offset for better visibility */
        [${m.HOVERED_ATTR}][data-full-width]${y}::before,
        [${m.SELECTED_ATTR}][data-full-width]${y}::before {
          outline-offset: ${m.HIGHLIGHT_STYLE.FULL_WIDTH.OFFSET} !important;
        }
        
        /* Full-width offset for replaced elements */
        :is(input, img, textarea, select, video, audio, iframe, canvas, svg):is([${m.HOVERED_ATTR}], [${m.SELECTED_ATTR}])[data-full-width] {
          outline-offset: ${m.HIGHLIGHT_STYLE.FULL_WIDTH.OFFSET} !important;
        }
        
        /* Replaced elements inside overflow-hidden parents - hide their outline and style the parent instead */
        :is([class*="overflow-hidden"], [class*="overflow-clip"]) > :is(img, video, iframe, canvas):is([${m.HOVERED_ATTR}], [${m.SELECTED_ATTR}]) {
          outline: none !important;
        }
        
        /* Apply outline to overflow-hidden parent when it contains a hovered/selected replaced element */
        :is([class*="overflow-hidden"], [class*="overflow-clip"]):has(> :is(img, video, iframe, canvas)[${m.HOVERED_ATTR}]) {
          outline: 2px solid ${m.HIGHLIGHT_COLOR} !important;
          outline-offset: ${m.HIGHLIGHT_STYLE.NORMAL.OFFSET} !important;
        }
        
        :is([class*="overflow-hidden"], [class*="overflow-clip"]):has(> :is(img, video, iframe, canvas)[${m.SELECTED_ATTR}]) {
          outline: 1px solid ${m.HIGHLIGHT_COLOR} !important;
        }
        
        /* Child element highlighting on hover - exclude SVGs and replaced elements */
        [${m.HOVERED_ATTR}] > *${y} {
          position: relative;
        }
        [${m.HOVERED_ATTR}] > *${y}::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          border-radius: 0px;
          outline: 1px dotted ${m.HIGHLIGHT_COLOR} !important;
          outline-offset: 1px !important;
          z-index: ${m.Z_INDEX};
          pointer-events: none;
        }
        
        /* Index element border-radius to match iframe */
        [${m.SELECTED_ATTR}][data-lov-index]${y}::before,
        [${m.HOVERED_ATTR}][data-lov-index]${y}::before {
          border-radius: 0px;
        }
        @media (min-width: ${m.TABLET_BREAKPOINT}) {
          [${m.SELECTED_ATTR}][data-lov-index]${y}::before,
          [${m.HOVERED_ATTR}][data-lov-index]${y}::before {
            border-radius: ${m.INDEX_BORDER_RADIUS};
          }
        }
      `,document.head.appendChild(u)},o=(u,y)=>{let v=document.createElement("div");return v.className="gpt-selected-tooltip",v.setAttribute("role","tooltip"),document.body.appendChild(v),i(v,u),t.selectedTooltips.set(y,v),v},i=(u,y)=>{if(!(!u||!y))try{let v=y.getBoundingClientRect(),C=y.getAttribute("data-lov-icon-preview")||nt(y),S=Math.abs(v.width-window.innerWidth)<5;if(u.style.maxWidth=`${m.MAX_TOOLTIP_WIDTH}px`,S)u.style.left=m.FULL_WIDTH_TOOLTIP_OFFSET,u.style.top=m.FULL_WIDTH_TOOLTIP_OFFSET;else{let L=v.top-m.TOOLTIP_OFFSET;u.style.left=`${v.left}px`,u.style.top=`${L}px`}u.textContent=C}catch(v){console.error("Error updating selected tooltip:",v),u.remove()}},l=(u,y=!1)=>{u.setAttribute(m.HOVERED_ATTR,"true"),y?u.setAttribute(m.PRIMARY_ATTR,"true"):u.removeAttribute(m.PRIMARY_ATTR),Lt(u)},s=u=>{u.removeAttribute(m.HOVERED_ATTR),u.hasAttribute(m.SELECTED_ATTR)||(u.removeAttribute("data-full-width"),u.removeAttribute("data-lov-index"),u.removeAttribute(m.PRIMARY_ATTR)),u instanceof HTMLElement&&(u.style.cursor="")},a=u=>u.tagName.toLowerCase()!=="svg"&&u.closest("svg")!==null,c=u=>u.tagName.toLowerCase()==="html"?null:a(u)?u.closest("svg"):u,d=r(u=>{if(!t.isActive)return;let y=u.target;if(!(y instanceof Element))return;let v=c(y);if(!v)return;t.hoveredElement&&V.findAllElementsById(ae(t.hoveredElement)).forEach(S=>{s(S)}),t.hoveredElement=v,(t.hoveredElement&&V.findAllElementsById(ae(t.hoveredElement)))?.forEach(C=>{l(C,C===v)})},m.DEBOUNCE_DELAY),f=r(()=>{t.isActive&&t.hoveredElement&&((t.hoveredElement&&V.findAllElementsById(ae(t.hoveredElement)))?.forEach(y=>{y.removeAttribute(m.HOVERED_ATTR),y.hasAttribute(m.SELECTED_ATTR)||(y.removeAttribute(m.PRIMARY_ATTR),s(y))}),t.hoveredElement=null)},m.DEBOUNCE_DELAY),g=()=>{t.scrollTimeout&&clearTimeout(t.scrollTimeout),t.isActive&&_({type:"SCROLL_HAPPENED",payload:{}}),t.selectedTooltips.forEach((u,y)=>{let v=t.clickedElementMap.get(y);if(v&&document.contains(v))i(u,v);else{let h=V.findAllElementsById(Nt(y));h.length>0&&i(u,h[0])}}),t.hoveredElement&&s(t.hoveredElement),t.scrollTimeout=setTimeout(()=>{t.scrollTimeout=null;let u=document.elementFromPoint(t.mouseX,t.mouseY);u&&t.isActive&&d({target:u})},m.SCROLL_DEBOUNCE)},I=u=>{t.isActive&&u.target&&u.target instanceof HTMLElement&&["input","textarea","select"].includes(u.target.tagName.toLowerCase())&&u.preventDefault()},p=u=>{if(t.isActive)return u.preventDefault(),u.stopPropagation(),!1},T=()=>{document.addEventListener("mouseover",d),document.addEventListener("mouseout",f),document.addEventListener("click",oe,!0),document.addEventListener("dblclick",ie,!0),window.addEventListener("scroll",g,{passive:!0}),window.addEventListener("resize",O,{passive:!0}),document.addEventListener("mousedown",I,!0),document.addEventListener("keydown",$);let u=document.createElement("style");u.textContent=`
        * {
          scroll-behavior: auto !important;
        }
        /* Enable pointer events on SVGs inside interactive elements so icons can be selected */
        :is(button, a, [role="button"], [role="link"]) svg {
          pointer-events: auto !important;
        }
      `,document.head.appendChild(u),t.styleElement=u,document.addEventListener("click",p,!0),document.addEventListener("submit",p,!0),document.addEventListener("touchstart",p,!0),document.addEventListener("touchend",p,!0)},O=()=>{t.selectedTooltips.forEach((u,y)=>{let v=t.clickedElementMap.get(y);if(v&&document.contains(v))i(u,v);else{let h=V.findAllElementsById(Nt(y));h.length>0&&i(u,h[0])}})},N=()=>{document.removeEventListener("mouseover",d),document.removeEventListener("mouseout",f),document.removeEventListener("click",oe),window.removeEventListener("scroll",g),window.removeEventListener("resize",O),document.removeEventListener("mousedown",I,!0),document.removeEventListener("keydown",$),document.removeEventListener("click",p,!0),document.removeEventListener("submit",p,!0),document.removeEventListener("touchstart",p,!0),document.removeEventListener("touchend",p,!0),t.styleElement&&(t.styleElement.remove(),t.styleElement=null),t.selectedTooltips.forEach(u=>u.remove()),t.selectedTooltips.clear(),document.body.style.cursor="",document.body.style.userSelect="",document.body.style.msUserSelect="",document.body.style.mozUserSelect="",t.hoveredElement&&(t.hoveredElement.hasAttribute(m.SELECTED_ATTR)||s(t.hoveredElement),t.hoveredElement=null)},E=u=>{if(!(u instanceof HTMLElement))return!1;let y=u.tagName.toLowerCase(),v=u.getAttribute("role");return y==="button"||y==="a"||v==="button"||v==="link"?!!(u.innerText&&u.innerText.trim().length>0):!1},b=(u,y,v,h)=>{if(!(u instanceof HTMLElement))return;u.setAttribute("contenteditable","true");let C=window.getComputedStyle(u),S=C.webkitTextFillColor==="transparent"||C.color==="rgba(0, 0, 0, 0)",L=C.backgroundClip==="text"||C.webkitBackgroundClip==="text";if(S||L){let D=document.documentElement.classList.contains("dark")||window.matchMedia("(prefers-color-scheme: dark)").matches;u.style.caretColor=D?"#fff":"#000"}u.focus();let k=D=>{_({type:"ELEMENT_TEXT_UPDATED",payload:{id:y,content:u.innerText,textNodeIndex:h}})},A=D=>{D.key==="Escape"&&(D.preventDefault(),D.stopPropagation(),v.forEach(M=>{M instanceof HTMLElement&&M.blur()}))},w=()=>{u.removeAttribute("contenteditable"),u.style.caretColor="",u.removeEventListener("input",k),u.removeEventListener("keydown",A),u.removeEventListener("blur",w)};u.addEventListener("input",k),u.addEventListener("keydown",A),u.addEventListener("blur",w)},W=u=>{try{if(!u?.origin||!u?.data?.type||!m.ALLOWED_ORIGINS.includes(u.origin))return;switch(u.data.type){case"TOGGLE_SELECTOR":let y=!!u.data.payload.isActive;t.isActive!==y&&(t.isActive=y,t.isActive?(T(),document.body.setAttribute("data-selector-active","true"),at().then(()=>{document.querySelectorAll("button[disabled]").forEach(h=>{h.removeAttribute("disabled"),h.setAttribute("data-lov-disabled","")})}).catch(()=>{console.error("Failed to load")})):(N(),document.body.removeAttribute("data-selector-active"),document.querySelectorAll("[data-lov-disabled]").forEach(C=>{C.removeAttribute("data-lov-disabled"),C.setAttribute("disabled","")}),document.querySelectorAll(`[${m.HOVERED_ATTR}], [data-full-width], [${m.PRIMARY_ATTR}]`).forEach(C=>{C.hasAttribute(m.SELECTED_ATTR)||(C.removeAttribute(m.PRIMARY_ATTR),s(C),C instanceof HTMLElement&&(C.style.cursor=""))}),t.reset()));break;case"UPDATE_SELECTED_ELEMENTS":if(!Array.isArray(u.data.payload)){console.error("Invalid payload for UPDATE_SELECTED_ELEMENTS");return}t.selectedTooltips.forEach(h=>h.remove()),t.selectedTooltips.clear(),document.querySelectorAll(`[${m.SELECTED_ATTR}], [${m.HOVERED_ATTR}]`).forEach(h=>{h.removeAttribute(m.SELECTED_ATTR),h.removeAttribute(m.HOVERED_ATTR),h.removeAttribute(m.PRIMARY_ATTR),h.removeAttribute("data-full-width"),h.removeAttribute("data-lov-index")}),u.data.payload.forEach(h=>{if(!h?.filePath||!h?.lineNumber){console.error("Invalid element data:",h);return}let C=rt({filePath:h.filePath,lineNumber:h.lineNumber,col:h.col??0}),S=V.findAllElementsById({filePath:h.filePath,lineNumber:h.lineNumber,col:h.col??0}),L=t.clickedElementMap.get(C),k=L&&document.contains(L)?L:S[0];S.forEach(A=>{A.setAttribute(m.SELECTED_ATTR,"true"),A===k?A.setAttribute(m.PRIMARY_ATTR,"true"):A.removeAttribute(m.PRIMARY_ATTR),Lt(A)}),k&&o(k,C)});break;case"GET_SELECTOR_STATE":_({type:"SELECTOR_STATE_RESPONSE",payload:{isActive:t.isActive}});break;case"SET_ELEMENT_CONTENT":{let{id:h,content:C,textNodeIndex:S}=u.data.payload;V.findAllElementsById({filePath:h.filePath,lineNumber:h.lineNumber,col:h.col??0}).forEach(k=>{if(S!==void 0){let A=0,w=!1;for(let D=0;D<k.childNodes.length;D++){let M=k.childNodes[D];if(M.nodeType===Node.TEXT_NODE){let U=M.textContent||"";if(U.trim()==="")continue;if(A===S){let K=U.match(/^\s*/)?.[0]||"",ce=U.match(/\s*$/)?.[0]||"",R=K+C+ce;M.textContent=R,w=!0;break}A++}else M.nodeType===Node.ELEMENT_NODE&&A++}w||(k.innerHTML=C)}else k.innerHTML=C})}break;case"SET_ELEMENT_ATTRS":{let{id:h,attrs:C}=u.data.payload,S=V.findAllElementsById({filePath:h.filePath,lineNumber:h.lineNumber,col:h.col??0});S.forEach(A=>{Object.keys(C).forEach(w=>{if(w==="backgroundImage"&&A instanceof HTMLElement){let D=C[w];D?A.style.backgroundImage=`url(${JSON.stringify(D)})`:A.style.backgroundImage=""}else A.setAttribute(w,C[w])})});let L=rt({filePath:h.filePath,lineNumber:h.lineNumber,col:h.col}),k=t.selectedTooltips.get(L);if(k){let A=t.clickedElementMap.get(L);A&&document.contains(A)?i(k,A):S.length>0&&i(k,S[0])}}break;case"SET_ELEMENT_ICON":{let{id:h,iconName:C}=u.data.payload,S=V.findAllElementsById({filePath:h.filePath,lineNumber:h.lineNumber,col:h.col??0}),L=rt({filePath:h.filePath,lineNumber:h.lineNumber,col:h.col}),k=t.selectedTooltips.get(L);if(k&&S.length>0){let w=t.clickedElementMap.get(L),D=w&&document.contains(w)?w:S[0];D.setAttribute("data-lov-icon-preview",C),i(k,D)}let A=async(w,D=5e3)=>{let M=new AbortController,U=setTimeout(()=>M.abort(),D);try{let K=await fetch(w,{signal:M.signal});return clearTimeout(U),K}catch(K){throw clearTimeout(U),K}};Promise.all(S.map(async w=>{if(w.tagName.toLowerCase()==="svg"){let D=w.innerHTML;try{let M=C.replace(/([A-Z])/g,"-$1").toLowerCase().slice(1),U=`https://unpkg.com/lucide-static@latest/icons/${encodeURIComponent(M)}.svg`,K=await A(U,5e3);if(!K.ok){console.warn(`Failed to fetch icon "${C}" (${K.status}): ${K.statusText}. Original icon preserved.`);return}let ce=await K.text();if(!ce||ce.trim().length===0){console.warn(`Empty response received for icon "${C}". Original icon preserved.`);return}let q=new DOMParser().parseFromString(ce,"image/svg+xml"),re=q.querySelector("parsererror");if(re){console.error(`Failed to parse SVG for icon "${C}":`,re.textContent);return}let P=q.querySelector("svg");if(!P||!P.innerHTML){console.warn(`Invalid SVG structure for icon "${C}". Original icon preserved.`);return}try{let X={};Array.from(w.attributes).forEach(Z=>{Z.name!=="viewBox"&&Z.name!=="xmlns"&&(X[Z.name]=Z.value)}),w.innerHTML=P.innerHTML,Object.entries(X).forEach(([Z,ye])=>{w.setAttribute(Z,ye)});let B=P.getAttribute("viewBox");B&&w.setAttribute("viewBox",B),w.setAttribute("data-lov-icon-preview",C),w.setAttribute("data-updated-icon-name",C)}catch(X){console.error(`Failed to update DOM for icon "${C}":`,X),w.innerHTML=D}}catch(M){M instanceof Error?M.name==="AbortError"?console.error(`Request timeout: Failed to load icon "${C}" within 5 seconds. Original icon preserved.`):console.error(`Failed to load icon "${C}":`,M.message):console.error(`Failed to load icon "${C}":`,M)}}})).catch(w=>{console.error("Failed to update icons:",w)})}break;case"DUPLICATE_ELEMENT_REQUESTED":{let{id:h}=u.data.payload;V.findAllElementsById({filePath:h.filePath,lineNumber:h.lineNumber,col:h.col??0}).forEach(S=>{let L=S.cloneNode(!0);L.setAttribute("data-lov-tmp","true"),S.parentElement?.appendChild(L)});break}case"SET_STYLESHEET":{let{stylesheet:h,fontLinks:C=[]}=u.data.payload,S=Array.from(document.querySelectorAll('link[id^="lovable-font-"]')),L=new Set;C.forEach(({fontUrl:A,linkId:w})=>{if(A&&w){let D=`lovable-font-${w}`;if(L.add(D),document.getElementById(D))return;let U=document.createElement("link");U.id=D,U.rel="stylesheet",U.href=A,document.head.appendChild(U)}}),S.forEach(A=>{L.has(A.id)||A.remove()});let k=document.getElementById(m.OVERRIDE_STYLESHEET_ID);k||(k=document.createElement("style"),k.id=m.OVERRIDE_STYLESHEET_ID,document.head.appendChild(k)),k.innerHTML=h;break}case"TOGGLE_PREVIEW_THEME":{let{theme:h}=u.data.payload;document.documentElement.classList.toggle("dark",h==="dark");break}case"REQUEST_PREVIEW_THEME":{_({type:"PREVIEW_THEME_STATE",payload:{theme:document.documentElement.classList.contains("dark")?"dark":"light"}});break}case"EDIT_TEXT_REQUESTED":{let{id:h}=u.data.payload,C=V.findAllElementsById({filePath:h.filePath,lineNumber:h.lineNumber,col:h.col??0});C.forEach(S=>{b(S,h,C)});break}case"HOVER_ELEMENT_REQUESTED":{let{id:h}=u.data.payload;document.querySelectorAll(`[${m.HOVERED_ATTR}]`).forEach(S=>{S.removeAttribute(m.HOVERED_ATTR),S.removeAttribute(m.PRIMARY_ATTR)}),V.findAllElementsById({filePath:h.filePath,lineNumber:h.lineNumber,col:h.col??0}).forEach((S,L)=>{S.setAttribute(m.HOVERED_ATTR,"true"),L===0&&S.setAttribute(m.PRIMARY_ATTR,"true")});break}case"UNHOVER_ELEMENT_REQUESTED":{let{id:h}=u.data.payload;V.findAllElementsById({filePath:h.filePath,lineNumber:h.lineNumber,col:h.col??0}).forEach(S=>{S.removeAttribute(m.HOVERED_ATTR),S.hasAttribute(m.SELECTED_ATTR)||S.removeAttribute(m.PRIMARY_ATTR)});break}case"GET_PARENT_ELEMENT":{let{id:h}=u.data.payload,C=V.findAllElementsById({filePath:h.filePath,lineNumber:h.lineNumber,col:h.col??0});if(C.length===0){_({type:"PARENT_ELEMENT",payload:null});break}let S=C[0],L=xr(S);if(!L)_({type:"PARENT_ELEMENT",payload:null});else{let k=L.getBoundingClientRect();_({type:"PARENT_ELEMENT",payload:Le(L),rect:k})}break}case"REQUEST_COMPONENT_TREE":wr().catch(console.error);break;case"INJECT_TAILWIND_CDN":case"UPDATE_TAILWIND_CONFIG":break;default:console.warn("Unknown message type:",u.data.type)}}catch(y){console.error("Error handling message:",y),N(),t.reset()}},te=u=>{t.mouseX=u.clientX,t.mouseY=u.clientY},$=u=>{if(!t.isActive||u.key!=="ArrowUp")return;let y=document.activeElement;if(y instanceof HTMLElement&&(y.isContentEditable||y.tagName==="INPUT"||y.tagName==="TEXTAREA"||y.tagName==="SELECT")||t.selectedTooltips.size!==1)return;u.preventDefault(),u.stopPropagation();let v=Array.from(t.selectedTooltips.keys())[0],h=V.findAllElementsById(Nt(v));if(h.length===0)return;let C=h[0],S=xr(C);if(!S)return;let L=Le(S),k=S.getBoundingClientRect();_({type:"ELEMENT_CLICKED",rect:k,payload:L,isMultiSelect:!1})},J=()=>{_({type:"REQUEST_PICKER_STATE"}),_({type:"REQUEST_SELECTED_ELEMENTS"})};(()=>{try{n(),window.addEventListener("message",W),document.addEventListener("mousemove",te),_({type:"SELECTOR_SCRIPT_LOADED",payload:{version:window.LOV_SELECTOR_SCRIPT_VERSION}}),at().then(()=>{J()}).catch(()=>{console.error("Failed to load")})}catch(u){console.error("Failed to initialize selector script:",u)}})();let oe=u=>{if(!t.isActive)return;let y=u.target;if(!(y instanceof Element))return;let v=c(y);if(!v)return;u.preventDefault(),u.stopPropagation();let h=u.metaKey||u.ctrlKey,C=Le(v),S=v.getBoundingClientRect(),L=rt({filePath:C.filePath,lineNumber:C.lineNumber,col:C.col});if(t.clickedElementMap.set(L,v),V.findAllElementsById(ae(v)).forEach(A=>{A.setAttribute(m.SELECTED_ATTR,"true"),A===v?A.setAttribute(m.PRIMARY_ATTR,"true"):A.removeAttribute(m.PRIMARY_ATTR),Lt(A)}),_({type:"ELEMENT_CLICKED",rect:S,payload:C,isMultiSelect:h}),!h&&E(v)){let A=ae(v),w=V.findAllElementsById(A);w.forEach(D=>{b(D,A,w)})}},ie=u=>{if(!t.isActive)return;let y=u.target;if(!(y instanceof Element))return;let v=c(y);if(!v)return;u.preventDefault(),u.stopPropagation();let h=Le(v);_({type:"ELEMENT_DOUBLE_CLICKED",payload:h})}};var oo="https://cdn.tailwindcss.com",xt=!1,io={darkMode:["class"],theme:{container:{center:!0,padding:"2rem",screens:{"2xl":"1400px"}},extend:{colors:{border:"hsl(var(--border))",input:"hsl(var(--input))",ring:"hsl(var(--ring))",background:"hsl(var(--background))",foreground:"hsl(var(--foreground))",primary:{DEFAULT:"hsl(var(--primary))",foreground:"hsl(var(--primary-foreground))"},secondary:{DEFAULT:"hsl(var(--secondary))",foreground:"hsl(var(--secondary-foreground))"},destructive:{DEFAULT:"hsl(var(--destructive))",foreground:"hsl(var(--destructive-foreground))"},muted:{DEFAULT:"hsl(var(--muted))",foreground:"hsl(var(--muted-foreground))"},accent:{DEFAULT:"hsl(var(--accent))",foreground:"hsl(var(--accent-foreground))"},popover:{DEFAULT:"hsl(var(--popover))",foreground:"hsl(var(--popover-foreground))"},card:{DEFAULT:"hsl(var(--card))",foreground:"hsl(var(--card-foreground))"},sidebar:{DEFAULT:"hsl(var(--sidebar-background))",foreground:"hsl(var(--sidebar-foreground))",primary:"hsl(var(--sidebar-primary))","primary-foreground":"hsl(var(--sidebar-primary-foreground))",accent:"hsl(var(--sidebar-accent))","accent-foreground":"hsl(var(--sidebar-accent-foreground))",border:"hsl(var(--sidebar-border))",ring:"hsl(var(--sidebar-ring))"}},borderRadius:{lg:"var(--radius)",md:"calc(var(--radius) - 2px)",sm:"calc(var(--radius) - 4px)"},keyframes:{"accordion-down":{from:{height:"0"},to:{height:"var(--radix-accordion-content-height)"}},"accordion-up":{from:{height:"var(--radix-accordion-content-height)"},to:{height:"0"}}},animation:{"accordion-down":"accordion-down 0.2s ease-out","accordion-up":"accordion-up 0.2s ease-out"}}}};function so(e){typeof window.tailwind<"u"?(window.tailwind.config=e,console.log("[Tailwind JIT] Updated Tailwind config dynamically")):console.warn("[Tailwind JIT] Cannot update config - Tailwind not loaded yet")}function Dt(){if(xt)return;if(document.querySelector("script[data-tailwind-jit]")){xt=!0;return}let e=document.createElement("script");e.src=oo,e.setAttribute("data-tailwind-jit","true"),e.onload=()=>{typeof window.tailwind<"u"&&(window.tailwind.config=io,console.log("[Tailwind JIT] Injected Tailwind v3 CDN with default theme config"))},document.head.appendChild(e),xt=!0}function Pr(){window.addEventListener("message",e=>{e.data?.type==="INJECT_TAILWIND_CDN"?Dt():e.data?.type==="UPDATE_TAILWIND_CONFIG"&&so(e.data.payload)})}var le=null,ot=[];function Gr(){if(le&&(le.readyState===WebSocket.CONNECTING||le.readyState===WebSocket.OPEN))return;let t=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}`;le=new WebSocket(t,"vite-hmr"),le.onopen=()=>{ot.forEach(r=>le?.send(r)),ot=[]},le.onclose=()=>{le=null},le.onerror=r=>{console.error("[virtual-overrides] Error connecting to Vite HMR",r),le=null,ot=[],Gr()}}function _t(e,t){let r=JSON.stringify({type:"custom",event:e,data:t});le&&le.readyState===WebSocket.OPEN?le.send(r):(ot.push(r),Gr())}function Ur(){window.addEventListener("message",e=>{if(m.ALLOWED_ORIGINS.includes(e.origin))switch(e.data?.type){case"VIRTUAL_OVERRIDE":{let t=e.data.payload;t?.path&&t?.content!==void 0&&_t("lovable:override",t);break}case"CLEAR_VIRTUAL_OVERRIDE":{let t=e.data.payload;t?.path&&_t("lovable:clear-override",t);break}case"CLEAR_ALL_VIRTUAL_OVERRIDES":{_t("lovable:clear-all-overrides",{});break}}})}var ao=()=>{if(window.location.search.includes("lov-override-script")){let t="http://localhost:8001/lovable.js";console.log("Overriding lovable.js script with:",t);let r=document.createElement("script");r.type="module",r.src=t,document.body.appendChild(r);return}if(window.top===window.self)return;Pt(),Ht(),Ar(),Tr(),Bt(),Wt(),Hr(),Dt(),Pr(),Ur();let e=Sr();window.addEventListener("unload",()=>{e&&e()})};ao();
/*! Bundled license information:

rrweb/es/rrweb/ext/tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
